/*! For license information please see src_FullCalendar_jsx-node_modules_react_cjs_react-jsx-runtime_production_min_js-src_Component-ea962d.aa5e5f31.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkiobroker_vis_2_widgets_fullcalendar=self.webpackChunkiobroker_vis_2_widgets_fullcalendar||[]).push([["src_FullCalendar_jsx-node_modules_react_cjs_react-jsx-runtime_production_min_js-src_Component-ea962d"],{90910:function(e,t,a){a.r(t);var n=a(74165),l=a(15861),r=a(15671),s=a(43144),i=a(11752),o=a(61120),c=a(60136),d=a(27277),u=a(4819),h=a.n(u),p=a(15854),f=a.n(p),v=a(58503),_=a(94427),x=a(75606),y=a(88411),k=a(99165),m=a(54794),b=a(80184),g=function(e){(0,c.Z)(a,e);var t=(0,d.Z)(a);function a(e){var s;return(0,r.Z)(this,a),(s=t.call(this,e)).onEventsChanged=function(e,t){if(s.state.rxData.calendar||!(e.split(".").length>3)){var a=JSON.parse(JSON.stringify(s.state.events)),n=a.findIndex((function(t){return t._id===e}));-1!==n?t?a[n]=t:a.splice(n,1):a.push(t),s.setState({events:a})}},s.updateEvents=(0,l.Z)((0,n.Z)().mark((function e(){var t,a,l,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.context.socket.getObjectViewCustom("schedule","schedule",s.state.rxData.calendar?"".concat(s.state.rxData.calendar,"."):"fullcalendar.".concat(s.state.rxData.instance,"."),s.state.rxData.calendar?"".concat(s.state.rxData.calendar,".\u9999"):"fullcalendar.".concat(s.state.rxData.instance,".\u9999"));case 2:return t=e.sent,a=0,e.prev=4,e.next=7,s.props.context.socket.getState("fullcalendar.".concat(s.state.rxData.instance,".info.timeZone"));case 7:l=e.sent,a=(null===l||void 0===l?void 0:l.val)||0,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:r=Object.values(t),s.state.rxData.calendar||(r=r.filter((function(e){return e._id.split(".").length<=3}))),s.setState({events:r,serverTimeZone:a});case 16:case"end":return e.stop()}}),e,null,[[4,11]])}))),s.changeEvents=function(e){s.setState({events:e})},s.setEvent=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(t,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.context.socket.setObject(t,a);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),s.deleteEvent=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.context.socket.delObject(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.widgetRef=h().createRef(),s}return(0,s.Z)(a,[{key:"getWidgetInfo",value:function(){return a.getWidgetInfo()}},{key:"componentDidMount",value:function(){(0,i.Z)((0,o.Z)(a.prototype),"componentDidMount",this).call(this),this.props.context.socket.subscribeObject(this.state.rxData.calendar?"".concat(this.state.rxData.calendar,".*"):"fullcalendar.".concat(this.state.rxData.instance,".*"),this.onEventsChanged),this.updateEvents()}},{key:"componentWillUnmount",value:function(){this.props.context.socket.unsubscribeObject(this.state.rxData.calendar?"".concat(this.state.rxData.calendar,".*"):"fullcalendar.".concat(this.state.rxData.instance,".*"),this.onEventsChanged),(0,i.Z)((0,o.Z)(a.prototype),"componentWillUnmount",this).call(this)}},{key:"onRxDataChanged",value:function(){this.updateEvents()}},{key:"renderWidgetBody",value:function(e){var t,n;(0,i.Z)((0,o.Z)(a.prototype),"renderWidgetBody",this).call(this,e),null!==(t=this.widgetRef.current)&&void 0!==t&&t.offsetWidth||this.forceUpdate();var l=(0,b.jsx)("div",{className:this.props.classes.content,ref:this.widgetRef,children:(0,b.jsx)(k.Z,{widget:!0,systemConfig:this.props.systemConfig?this.props.systemConfig.common:null===(n=this.props.context.systemConfig)||void 0===n?void 0:n.common,events:this.state.events||[],socket:this.props.context.socket,instance:this.state.rxData.instance,calendarPrefix:"fullcalendar.".concat(this.state.rxData.instance),changeEvents:this.changeEvents,updateEvents:this.updateEvents,setEvent:this.setEvent,deleteEvent:this.deleteEvent,serverTimeZone:this.state.serverTimeZone||0,readOnly:this.state.rxData.readOnly||!1,hideLeftBlock:this.state.rxData.hideLeftBlock||!1,hideTopBlock:this.state.rxData.hideTopBlock||!1,hideLeftBlockHint:this.state.rxData.hideLeftBlockHint||!1,hideTopBlockButtons:this.state.rxData.hideTopBlockButtons||!1,viewMode:this.state.rxData.viewMode||null,storageName:"fc_".concat(this.props.id),hideWeekends:this.state.rxData.hideWeekends||!1,t:a.t,language:x.I18n.getLanguage(),dayStep:this.state.rxData.dayStep||30},this.state.rxData.viewMode)});return"relative"===this.state.rxStyle.position?this.wrapContent(l,null,{height:"calc(100% - 24px)",width:"calc(100% - 24px)"},null,null,{Card:_.Card,CardContent:_.CardContent}):l}}],[{key:"getWidgetInfo",value:function(){return{id:"tplFullCalendar",visSet:"fullcalendar",visWidgetLabel:"fullcalendar",visSetLabel:"set_label",visSetColor:"#112233",visName:"Full calendar",visAttrs:[{name:"common",fields:[{label:"instance",name:"instance",type:"instance",adapter:"fullcalendar",isShort:!0},{label:"calendar",name:"calendar",type:"custom",component:function(e,t,a,n){return(0,b.jsx)(m.Z,{instance:t.instance,value:t.calendar,onChange:function(e){return a({calendar:e})},socket:n.context.socket},t.instance)},default:""},{label:"read_only",name:"readOnly",type:"checkbox",default:!1},{label:"hide_left_block",name:"hideLeftBlock",type:"checkbox",hidden:function(e){return e.readOnly},default:!1},{label:"hide_left_block_hint",name:"hideLeftBlockHint",type:"checkbox",hidden:function(e){return e.readOnly||e.hideLeftBlock},default:!1},{label:"hide_top_block",name:"hideTopBlock",type:"checkbox",default:!1},{label:"hide_top_block_buttons",name:"hideTopBlockButtons",type:"checkbox",hidden:function(e){return e.hide_top_block},default:!1},{label:"hide_weekends",name:"hideWeekends",type:"checkbox",default:!1},{label:"view_mode",name:"viewMode",type:"select",options:[{label:"full_calendar_dayGridMonth",value:"dayGridMonth"},{label:"full_calendar_timeGridWeek",value:"timeGridWeek"},{label:"full_calendar_timeGridDay",value:"timeGridDay"},{label:"full_calendar_listMonth",value:"listMonth"}],default:"dayGridMonth"},{label:"name",name:"name",tooltip:"used_only_with_relative",default:"",hidden:function(e,t,a){return a&&"relative"!==a.position}},{label:"day_step",tooltip:"day_step_minutes",name:"dayStep",default:30,type:"select",noTranslation:!0,hidden:function(e){return"timeGridDay"!==e.viewMode&&"timeGridWeek"!==e.viewMode},options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20},{label:"30",value:30},{label:"60",value:60}]}]}],visDefaultStyle:{width:"100%",height:355,position:"relative"},visPrev:"widgets/fullcalendar/img/prev_fullcalendar.png"}}},{key:"t",value:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return x.I18n.t.apply(x.I18n,["full_calendar_".concat(e)].concat(a))}}]),a}(window.visRxWidget||y.VisRxWidget);g.propTypes={style:f().object,data:f().object,context:f().object},t.default=(0,v.withStyles)((function(){return{content:{display:"flex",width:"100%",height:"100%",overflow:"auto"}}}))((0,v.withTheme)(g))},66374:function(e,t,a){var n=a(4819),l=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,a){var n,r={},c=null,d=null;for(n in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,n)&&!o.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===r[n]&&(r[n]=t[n]);return{$$typeof:l,type:e,key:c,ref:d,props:r,_owner:i.current}}t.Fragment=r,t.jsx=c,t.jsxs=c}}]);
//# sourceMappingURL=src_FullCalendar_jsx-node_modules_react_cjs_react-jsx-runtime_production_min_js-src_Component-ea962d.aa5e5f31.chunk.js.map