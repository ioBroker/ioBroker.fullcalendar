"use strict";(self.webpackChunkiobroker_vis_2_widgets_fullcalendar=self.webpackChunkiobroker_vis_2_widgets_fullcalendar||[]).push([["src_FullCalendar_jsx-node_modules_react-transition-group_esm_CSSTransition_js"],{4278:function(A,O,o){o.r(O);var P=o(4819),_=o.n(P),b=o(15854),h=o.n(b),m=o(58503),L=o.n(m),p=o(94427),T=o.n(p),E=o(75606),y=o.n(E),M=o(88411),W=o.n(M),B=o(83178),C=Object.defineProperty,g=(d,n,a)=>n in d?C(d,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):d[n]=a,x=(d,n,a)=>(g(d,typeof n!="symbol"?n+"":n,a),a),r=(d,n,a)=>new Promise((t,s)=>{var i=c=>{try{v(a.next(c))}catch(D){s(D)}},u=c=>{try{v(a.throw(c))}catch(D){s(D)}},v=c=>c.done?t(c.value):Promise.resolve(c.value).then(i,u);v((a=a.apply(d,n)).next())});const l=()=>({content:{display:"flex",width:"100%",height:"100%",overflow:"auto"}}),f=window.visRxWidget||M.VisRxWidget;class e extends f{constructor(n){super(n),x(this,"onEventsChanged",(a,t)=>{const s=JSON.parse(JSON.stringify(this.state.events)),i=s.findIndex(u=>u._id===a);i!==-1?t?s[i]=t:s.splice(i,1):s.push(t),this.setState({events:s})}),x(this,"updateEvents",()=>r(this,null,function*(){const a=yield this.props.socket.getObjectViewCustom("schedule","schedule",`fullcalendar.${this.state.rxData.instance}.`,`fullcalendar.${this.state.rxData.instance}.\u9999`);let t=0;try{const s=yield this.props.socket.getState("fullcalendar.0.info.timeZone");t=(s==null?void 0:s.val)||0}catch(s){}this.setState({events:Object.values(a),serverTimeZone:t})})),x(this,"changeEvents",a=>{this.setState({events:a})}),this.widgetRef=_().createRef()}static getWidgetInfo(){return{id:"tplFullCalendar",visSet:"fullcalendar",visWidgetLabel:"fullcalendar",visSetLabel:"set_label",visSetColor:"#112233",visName:"Full calendar",visAttrs:[{name:"common",fields:[{label:"instance",name:"instance",type:"instance",adapter:"fullcalendar",isShort:!0},{label:"read_only",name:"readOnly",type:"checkbox",default:!1},{label:"hide_left_block",name:"hideLeftBlock",type:"checkbox",hidden:n=>n.readOnly,default:!1},{label:"hide_left_block_hint",name:"hideLeftBlockHint",type:"checkbox",hidden:n=>n.readOnly||n.hideLeftBlock,default:!1},{label:"hide_top_block",name:"hideTopBlock",type:"checkbox",default:!1},{label:"hide_top_block_buttons",name:"hideTopBlockButtons",type:"checkbox",hidden:n=>n.hide_top_block,default:!1},{label:"hide_weekends",name:"hideWeekends",type:"checkbox",default:!1},{label:"view_mode",name:"viewMode",type:"select",options:[{label:"full_calendar_dayGridMonth",value:"dayGridMonth"},{label:"full_calendar_timeGridWeek",value:"timeGridWeek"},{label:"full_calendar_timeGridDay",value:"timeGridDay"},{label:"full_calendar_listMonth",value:"listMonth"}],default:"dayGridMonth"},{label:"name",name:"name",tooltip:"used_only_with_relative",default:"",hidden:(n,a,t)=>t&&t.position!=="relative"}]}],visDefaultStyle:{width:"100%",height:355,position:"relative"},visPrev:"widgets/fullcalendar/img/prev_fullcalendar.png"}}static t(n,...a){return E.I18n.t(`full_calendar_${n}`,...a)}getWidgetInfo(){return e.getWidgetInfo()}componentDidMount(){super.componentDidMount(),this.props.socket.subscribeObject(`fullcalendar.${this.state.rxData.instance}.*`,this.onEventsChanged),this.updateEvents()}componentWillUnmount(){this.props.socket.unsubscribeObject(`fullcalendar.${this.state.rxData.instance}.*`,this.onEventsChanged),super.componentWillUnmount()}onRxDataChanged(){this.updateEvents()}renderWidgetBody(n){var a,t;super.renderWidgetBody(n),(a=this.widgetRef.current)!=null&&a.offsetWidth||this.forceUpdate();const s=_().createElement("div",{className:this.props.classes.content,ref:this.widgetRef},_().createElement(B.Z,{widget:!0,systemConfig:(t=this.props.systemConfig)==null?void 0:t.common,key:this.state.rxData.viewMode,events:this.state.events||[],socket:this.props.socket,instance:this.state.rxData.instance,changeEvents:this.changeEvents,updateEvents:this.updateEvents,serverTimeZone:this.state.serverTimeZone||0,readOnly:this.state.rxData.readOnly||!1,hideLeftBlock:this.state.rxData.hideLeftBlock||!1,hideTopBlock:this.state.rxData.hideTopBlock||!1,hideLeftBlockHint:this.state.rxData.hideLeftBlockHint||!1,hideTopBlockButtons:this.state.rxData.hideTopBlockButtons||!1,viewMode:this.state.rxData.viewMode||null,storageName:`fc_${this.props.id}`,hideWeekends:this.state.rxData.hideWeekends||!1,t:e.t,language:E.I18n.getLanguage()}));return this.state.rxStyle.position==="relative"?this.wrapContent(s,null,{height:"calc(100% - 24px)",width:"calc(100% - 24px)"},null,null,{Card:p.Card,CardContent:p.CardContent}):s}}e.propTypes={systemConfig:h().object,socket:h().object,themeType:h().string,style:h().object,data:h().object},O.default=(0,m.withStyles)(l)((0,m.withTheme)(e))},22171:function(A,O,o){o.d(O,{Z:function(){return x}});var P=o(87462),_=o(63366),b=o(51721),h=o(15854);function m(r,l){return r.classList?!!l&&r.classList.contains(l):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+l+" ")!==-1}function L(r,l){r.classList?r.classList.add(l):m(r,l)||(typeof r.className=="string"?r.className=r.className+" "+l:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+l))}function p(r,l){return r.replace(new RegExp("(^|\\s)"+l+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function T(r,l){r.classList?r.classList.remove(l):typeof r.className=="string"?r.className=p(r.className,l):r.setAttribute("class",p(r.className&&r.className.baseVal||"",l))}var E=o(4819),y=o.n(E),M=o(24561),W=o(97735),B=function(l,f){return l&&f&&f.split(" ").forEach(function(e){return L(l,e)})},C=function(l,f){return l&&f&&f.split(" ").forEach(function(e){return T(l,e)})},g=function(r){(0,b.Z)(l,r);function l(){for(var e,d=arguments.length,n=new Array(d),a=0;a<d;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(t,s){var i=e.resolveArguments(t,s),u=i[0],v=i[1];e.removeClasses(u,"exit"),e.addClass(u,v?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(t,s)},e.onEntering=function(t,s){var i=e.resolveArguments(t,s),u=i[0],v=i[1],c=v?"appear":"enter";e.addClass(u,c,"active"),e.props.onEntering&&e.props.onEntering(t,s)},e.onEntered=function(t,s){var i=e.resolveArguments(t,s),u=i[0],v=i[1],c=v?"appear":"enter";e.removeClasses(u,c),e.addClass(u,c,"done"),e.props.onEntered&&e.props.onEntered(t,s)},e.onExit=function(t){var s=e.resolveArguments(t),i=s[0];e.removeClasses(i,"appear"),e.removeClasses(i,"enter"),e.addClass(i,"exit","base"),e.props.onExit&&e.props.onExit(t)},e.onExiting=function(t){var s=e.resolveArguments(t),i=s[0];e.addClass(i,"exit","active"),e.props.onExiting&&e.props.onExiting(t)},e.onExited=function(t){var s=e.resolveArguments(t),i=s[0];e.removeClasses(i,"exit"),e.addClass(i,"exit","done"),e.props.onExited&&e.props.onExited(t)},e.resolveArguments=function(t,s){return e.props.nodeRef?[e.props.nodeRef.current,t]:[t,s]},e.getClassNames=function(t){var s=e.props.classNames,i=typeof s=="string",u=i&&s?s+"-":"",v=i?""+u+t:s[t],c=i?v+"-active":s[t+"Active"],D=i?v+"-done":s[t+"Done"];return{baseClassName:v,activeClassName:c,doneClassName:D}},e}var f=l.prototype;return f.addClass=function(d,n,a){var t=this.getClassNames(n)[a+"ClassName"],s=this.getClassNames("enter"),i=s.doneClassName;n==="appear"&&a==="done"&&i&&(t+=" "+i),a==="active"&&d&&(0,W.Q)(d),t&&(this.appliedClasses[n][a]=t,B(d,t))},f.removeClasses=function(d,n){var a=this.appliedClasses[n],t=a.base,s=a.active,i=a.done;this.appliedClasses[n]={},t&&C(d,t),s&&C(d,s),i&&C(d,i)},f.render=function(){var d=this.props,n=d.classNames,a=(0,_.Z)(d,["classNames"]);return y().createElement(M.ZP,(0,P.Z)({},a,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},l}(y().Component);g.defaultProps={classNames:""},g.propTypes={};var x=g}}]);

//# sourceMappingURL=src_FullCalendar_jsx-node_modules_react-transition-group_esm_CSSTransition_js.5037f0dd.chunk.js.map