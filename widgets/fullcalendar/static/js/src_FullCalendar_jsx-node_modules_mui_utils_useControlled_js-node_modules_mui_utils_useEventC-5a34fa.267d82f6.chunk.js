"use strict";(self.webpackChunkiobroker_vis_2_widgets_fullcalendar=self.webpackChunkiobroker_vis_2_widgets_fullcalendar||[]).push([["src_FullCalendar_jsx-node_modules_mui_utils_useControlled_js-node_modules_mui_utils_useEventC-5a34fa"],{4278:function(D,p,l){l.r(p);var _=l(4819),o=l.n(_),O=l(15854),y=l.n(O),h=l(58503),a=l.n(h),u=l(94427),e=l.n(u),t=l(75606),r=l.n(t),n=l(88411),i=l.n(n),f=l(83178),d=Object.defineProperty,g=(P,s,c)=>s in P?d(P,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):P[s]=c,W=(P,s,c)=>(g(P,typeof s!="symbol"?s+"":s,c),c),I=(P,s,c)=>new Promise((m,v)=>{var w=E=>{try{R(c.next(E))}catch(B){v(B)}},C=E=>{try{R(c.throw(E))}catch(B){v(B)}},R=E=>E.done?m(E.value):Promise.resolve(E.value).then(w,C);R((c=c.apply(P,s)).next())});const k=()=>({content:{display:"flex",width:"100%",height:"100%",overflow:"auto"}}),x=window.visRxWidget||n.VisRxWidget;class M extends x{constructor(s){super(s),W(this,"onEventsChanged",(c,m)=>{const v=JSON.parse(JSON.stringify(this.state.events)),w=v.findIndex(C=>C._id===c);w!==-1?m?v[w]=m:v.splice(w,1):v.push(m),this.setState({events:v})}),W(this,"updateEvents",()=>I(this,null,function*(){const c=yield this.props.socket.getObjectViewCustom("schedule","schedule",`fullcalendar.${this.state.rxData.instance}.`,`fullcalendar.${this.state.rxData.instance}.\u9999`);let m=0;try{const v=yield this.props.socket.getState("fullcalendar.0.info.timeZone");m=(v==null?void 0:v.val)||0}catch(v){}this.setState({events:Object.values(c),serverTimeZone:m})})),W(this,"changeEvents",c=>{this.setState({events:c})}),this.widgetRef=o().createRef()}static getWidgetInfo(){return{id:"tplFullCalendar",visSet:"fullcalendar",visWidgetLabel:"fullcalendar",visSetLabel:"set_label",visSetColor:"#112233",visName:"Full calendar",visAttrs:[{name:"common",fields:[{label:"instance",name:"instance",type:"instance",adapter:"fullcalendar",isShort:!0},{label:"read_only",name:"readOnly",type:"checkbox",default:!1},{label:"hide_left_block",name:"hideLeftBlock",type:"checkbox",hidden:s=>s.readOnly,default:!1},{label:"hide_left_block_hint",name:"hideLeftBlockHint",type:"checkbox",hidden:s=>s.readOnly||s.hideLeftBlock,default:!1},{label:"hide_top_block",name:"hideTopBlock",type:"checkbox",default:!1},{label:"hide_top_block_buttons",name:"hideTopBlockButtons",type:"checkbox",hidden:s=>s.hide_top_block,default:!1},{label:"hide_weekends",name:"hideWeekends",type:"checkbox",default:!1},{label:"view_mode",name:"viewMode",type:"select",options:[{label:"full_calendar_dayGridMonth",value:"dayGridMonth"},{label:"full_calendar_timeGridWeek",value:"timeGridWeek"},{label:"full_calendar_timeGridDay",value:"timeGridDay"},{label:"full_calendar_listMonth",value:"listMonth"}],default:"dayGridMonth"},{label:"name",name:"name",tooltip:"used_only_with_relative",default:"",hidden:(s,c,m)=>m&&m.position!=="relative"}]}],visDefaultStyle:{width:"100%",height:355,position:"relative"},visPrev:"widgets/fullcalendar/img/prev_fullcalendar.png"}}static t(s,...c){return t.I18n.t(`full_calendar_${s}`,...c)}getWidgetInfo(){return M.getWidgetInfo()}componentDidMount(){super.componentDidMount(),this.props.socket.subscribeObject(`fullcalendar.${this.state.rxData.instance}.*`,this.onEventsChanged),this.updateEvents()}componentWillUnmount(){this.props.socket.unsubscribeObject(`fullcalendar.${this.state.rxData.instance}.*`,this.onEventsChanged),super.componentWillUnmount()}onRxDataChanged(){this.updateEvents()}renderWidgetBody(s){var c,m;super.renderWidgetBody(s),(c=this.widgetRef.current)!=null&&c.offsetWidth||this.forceUpdate();const v=o().createElement("div",{className:this.props.classes.content,ref:this.widgetRef},o().createElement(f.Z,{widget:!0,systemConfig:(m=this.props.systemConfig)==null?void 0:m.common,key:this.state.rxData.viewMode,events:this.state.events||[],socket:this.props.socket,instance:this.state.rxData.instance,changeEvents:this.changeEvents,updateEvents:this.updateEvents,serverTimeZone:this.state.serverTimeZone||0,readOnly:this.state.rxData.readOnly||!1,hideLeftBlock:this.state.rxData.hideLeftBlock||!1,hideTopBlock:this.state.rxData.hideTopBlock||!1,hideLeftBlockHint:this.state.rxData.hideLeftBlockHint||!1,hideTopBlockButtons:this.state.rxData.hideTopBlockButtons||!1,viewMode:this.state.rxData.viewMode||null,storageName:`fc_${this.props.id}`,hideWeekends:this.state.rxData.hideWeekends||!1,t:M.t,language:t.I18n.getLanguage()}));return this.state.rxStyle.position==="relative"?this.wrapContent(v,null,{height:"calc(100% - 24px)",width:"calc(100% - 24px)"},null,null,{Card:u.Card,CardContent:u.CardContent}):v}}M.propTypes={systemConfig:y().object,socket:y().object,themeType:y().string,style:y().object,data:y().object},p.default=(0,h.withStyles)(k)((0,h.withTheme)(M))},9109:function(D,p){Object.defineProperty(p,"__esModule",{value:!0}),p.default=l;function l(_,o){typeof _=="function"?_(o):_&&(_.current=o)}},48728:function(D,p,l){var _;_={value:!0},p.Z=h;var o=y(l(4819));function O(a){if(typeof WeakMap!="function")return null;var u=new WeakMap,e=new WeakMap;return(O=function(t){return t?e:u})(a)}function y(a,u){if(!u&&a&&a.__esModule)return a;if(a===null||typeof a!="object"&&typeof a!="function")return{default:a};var e=O(u);if(e&&e.has(a))return e.get(a);var t={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in a)if(n!=="default"&&Object.prototype.hasOwnProperty.call(a,n)){var i=r?Object.getOwnPropertyDescriptor(a,n):null;i&&(i.get||i.set)?Object.defineProperty(t,n,i):t[n]=a[n]}return t.default=a,e&&e.set(a,t),t}function h({controlled:a,default:u,name:e,state:t="value"}){const{current:r}=o.useRef(a!==void 0),[n,i]=o.useState(u),f=r?a:n,d=o.useCallback(g=>{r||i(g)},[]);return[f,d]}},53785:function(D,p,l){Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var _=O(l(4819));function o(a){if(typeof WeakMap!="function")return null;var u=new WeakMap,e=new WeakMap;return(o=function(t){return t?e:u})(a)}function O(a,u){if(!u&&a&&a.__esModule)return a;if(a===null||typeof a!="object"&&typeof a!="function")return{default:a};var e=o(u);if(e&&e.has(a))return e.get(a);var t={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in a)if(n!=="default"&&Object.prototype.hasOwnProperty.call(a,n)){var i=r?Object.getOwnPropertyDescriptor(a,n):null;i&&(i.get||i.set)?Object.defineProperty(t,n,i):t[n]=a[n]}return t.default=a,e&&e.set(a,t),t}var h=typeof window!="undefined"?_.useLayoutEffect:_.useEffect;p.default=h},43064:function(D,p,l){var _,o=l(64836);_={value:!0},p.Z=u;var O=a(l(4819)),y=o(l(53785));function h(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(h=function(n){return n?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if(f!=="default"&&Object.prototype.hasOwnProperty.call(e,f)){var d=i?Object.getOwnPropertyDescriptor(e,f):null;d&&(d.get||d.set)?Object.defineProperty(n,f,d):n[f]=e[f]}return n.default=e,r&&r.set(e,n),n}function u(e){const t=O.useRef(e);return(0,y.default)(()=>{t.current=e}),O.useCallback((...r)=>(0,t.current)(...r),[])}},21172:function(D,p,l){var _,o=l(64836);_={value:!0},p.Z=u;var O=a(l(4819)),y=o(l(9109));function h(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(h=function(n){return n?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if(f!=="default"&&Object.prototype.hasOwnProperty.call(e,f)){var d=i?Object.getOwnPropertyDescriptor(e,f):null;d&&(d.get||d.set)?Object.defineProperty(n,f,d):n[f]=e[f]}return n.default=e,r&&r.set(e,n),n}function u(...e){return O.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{(0,y.default)(r,t)})},e)}},58828:function(D,p,l){var _;_={value:!0},p.Z=e;var o=y(l(4819));function O(t){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(O=function(i){return i?n:r})(t)}function y(t,r){if(!r&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=O(r);if(n&&n.has(t))return n.get(t);var i={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in t)if(d!=="default"&&Object.prototype.hasOwnProperty.call(t,d)){var g=f?Object.getOwnPropertyDescriptor(t,d):null;g&&(g.get||g.set)?Object.defineProperty(i,d,g):i[d]=t[d]}return i.default=t,n&&n.set(t,i),i}let h=0;function a(t){const[r,n]=o.useState(t),i=t||r;return o.useEffect(()=>{r==null&&(h+=1,n(`mui-${h}`))},[r]),i}const u=o["useId"];function e(t){if(u!==void 0){const r=u();return t!=null?t:r}return a(t)}}}]);

//# sourceMappingURL=src_FullCalendar_jsx-node_modules_mui_utils_useControlled_js-node_modules_mui_utils_useEventC-5a34fa.267d82f6.chunk.js.map