{"version":3,"file":"static/js/node_modules_iobroker_vis-2-widgets-react-dev_index_jsx-_adb40.d1383b3e.chunk.js","mappings":"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","sources":["../node_modules/@iobroker/vis-2-widgets-react-dev/visRxWidget.jsx"],"sourcesContent":["import React from 'react';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nclass visRxWidget extends React.Component {\n    constructor(props) {\n        super(props);\n        this.onStateChanged = this.onStateChanged.bind(this);\n        this.state = {\n            ...props,\n            values: {},\n            data: JSON.parse(JSON.stringify(props.data || {})),\n            style: JSON.parse(JSON.stringify(props.style || {})),\n            rxData: JSON.parse(JSON.stringify(props.data || {})),\n            rxStyle: JSON.parse(JSON.stringify(props.style || {})),\n        };\n        this.linkContext = {\n            IDs: [],\n        };\n    }\n\n    static getI18nPrefix() {\n        return '';\n    }\n\n    static t(key, ...args) {\n        return I18n.t(`${this.getI18nPrefix()}${key}`, ...args);\n    }\n\n    static getLanguage() {\n        return I18n.getLanguage();\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderWidgetBody() {\n\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    // @ts-ignore\n    onStateUpdated(id, state) {\n\n    }\n\n    formatValue(value, round) {\n        if (typeof value === 'number') {\n            if (round === 0) {\n                value = Math.round(value);\n            } else {\n                value = Math.round(value * 100) / 100;\n            }\n            if (this.props.systemConfig?.common) {\n                if (this.props.systemConfig.common.isFloatComma) {\n                    value = value.toString().replace('.', ',');\n                }\n            }\n        }\n\n        return value === undefined || value === null ? '' : value.toString();\n    }\n\n    wrapContent(content, addToHeader, cardContentStyle, headerStyle, onCardClick, components) {\n        const Card = components.Card;\n        const CardContent = components.CardContent;\n\n        return <Card\n            style={{ width: 'calc(100% - 8px)', height: 'calc(100% - 8px)', margin: 4 }}\n            onClick={onCardClick}\n        >\n            <CardContent\n                style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    height: '100%',\n                    position: 'relative',\n                    ...cardContentStyle,\n                }}\n            >\n                {this.state.rxData.name ? <div\n                    style={{\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        width: '100%',\n                        alignItems: 'center',\n                    }}\n                >\n                    <div\n                        style={{\n                            fontSize: 24,\n                            paddingTop: 0,\n                            paddingBottom: 4,\n                            ...headerStyle,\n                        }}\n                    >\n                        {this.state.rxData.name}\n                    </div>\n                    {addToHeader || null}\n                </div> : (addToHeader || null)}\n                {content}\n            </CardContent>\n        </Card>;\n    }\n\n    getIdSubscribeState = (id, cb) => {\n        return this.props.socket.getState(id)\n            .then(result => {\n                cb(id, result);\n                return this.props.socket.subscribeState(id, (resultId, result) => cb(id, result));\n            });\n    };\n\n    onStateChanged(id, state) {\n        if (!state) {\n            return;\n        }\n        const values = JSON.parse(JSON.stringify(this.state.values));\n        Object.keys(state).forEach(key =>\n            values[`${id}.${key}`] = state[key]);\n\n        this.onStateUpdated(id, state);\n\n        this.setState({ values });\n    }\n\n    async componentDidMount() {\n        this.getWidgetInfo()?.visAttrs?.forEach(group =>\n            group?.fields?.forEach(field => {\n                if (field?.type === 'id') {\n                    Object.keys(this.state.data).forEach(dataKey => {\n                        // do not use here \\d instead of [0-9] as it will be wrong compiled\n                        if (dataKey.match(new RegExp(`^${field.name}[0-9]*$`))) {\n                            const oid = this.state.data[dataKey];\n                            if (!this.linkContext.IDs.includes(oid)) {\n                                this.linkContext.IDs.push(oid);\n                            }\n                        }\n                    });\n                }\n            }));\n\n        for (let i = 0; i < this.linkContext.IDs.length; i++) {\n            await this.getIdSubscribeState(this.linkContext.IDs[i], this.onStateChanged);\n        }\n    }\n\n    componentWillUnmount() {\n        this.linkContext.IDs.forEach(oid =>\n            this.props.socket.unsubscribeState(oid, this.onStateChanged));\n    }\n\n    render() {\n        return <div style={{ width: this.state.style?.width, height: this.state.style?.height }}>\n            {this.renderWidgetBody()}\n        </div>;\n    }\n}\n\nexport default visRxWidget;\n"],"names":["_react","_interopRequireDefault","require","_adapterReactV","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","_getPrototypeOf2","result","NewTarget","constructor","Reflect","construct","_possibleConstructorReturn2","sham","Proxy","Boolean","prototype","valueOf","call","e","visRxWidget","_React$Component","_inherits2","_super","props","_this","_classCallCheck2","_assertThisInitialized2","id","cb","socket","getState","then","subscribeState","resultId","onStateChanged","bind","state","values","data","JSON","parse","stringify","style","rxData","rxStyle","linkContext","IDs","_createClass2","value","round","_this$props$systemCon","Math","systemConfig","common","isFloatComma","toString","replace","content","addToHeader","cardContentStyle","headerStyle","onCardClick","components","Card","CardContent","createElement","width","height","margin","onClick","display","flexDirection","alignItems","position","name","justifyContent","fontSize","paddingTop","paddingBottom","concat","onStateUpdated","setState","_componentDidMount","_asyncToGenerator2","_regenerator","mark","_callee","_this$getWidgetInfo","_this$getWidgetInfo$v","_this2","wrap","_context","prev","next","getWidgetInfo","visAttrs","group","_group$fields","fields","field","type","dataKey","match","RegExp","oid","includes","getIdSubscribeState","stop","componentDidMount","_this3","unsubscribeState","_this$state$style","_this$state$style2","renderWidgetBody","_len","args","Array","_key","I18n","t","getI18nPrefix","getLanguage","React","Component","_default","exports"],"sourceRoot":""}