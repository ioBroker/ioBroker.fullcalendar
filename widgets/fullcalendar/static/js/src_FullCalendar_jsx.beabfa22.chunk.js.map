{"version":3,"file":"static/js/src_FullCalendar_jsx.beabfa22.chunk.js","mappings":"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","sources":["FullCalendar.jsx"],"sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles, withTheme } from '@mui/styles';\r\n\r\nimport {\r\n    I18n,\r\n} from '@iobroker/adapter-react-v5';\r\n\r\nimport { VisRxWidget } from '@iobroker/vis-2-widgets-react-dev';\r\nimport Calendar from './Component/Calendar';\r\n\r\nconst styles = () => ({\r\n    content: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'auto',\r\n    },\r\n});\r\n\r\nconst Generic = window.visRxWidget || VisRxWidget;\r\n\r\nclass FullCalendar extends Generic {\r\n    static getWidgetInfo() {\r\n        return {\r\n            id: 'tplFullCalendar',\r\n            visSet: 'fullcalendar',\r\n            visWidgetLabel: 'fullcalendar',  // Label of widget\r\n            visSetLabel: 'set_label', // Label of widget set\r\n            visName: 'Full calendar',\r\n            visAttrs: [{\r\n                name: 'common',\r\n                fields: [\r\n                    {\r\n                        label: 'instance',\r\n                        name: 'instance',\r\n                        type: 'instance',\r\n                        adapter: 'fullcalendar',\r\n                        isShort: true,\r\n                    },\r\n                    {\r\n                        label: 'read_only',\r\n                        name: 'readOnly',\r\n                        type: 'checkbox',\r\n                        default: false,\r\n                    },\r\n                    {\r\n                        label: 'hide_left_block',\r\n                        name: 'hideLeftBlock',\r\n                        type: 'checkbox',\r\n                        default: false,\r\n                    },\r\n                    {\r\n                        label: 'hide_top_block',\r\n                        name: 'hideTopBlock',\r\n                        type: 'checkbox',\r\n                        default: false,\r\n                    },\r\n                    {\r\n                        label: 'view_mode',\r\n                        name: 'viewMode',\r\n                        type: 'select',\r\n                        options: ['dayGridMonth', 'timeGridWeek', 'timeGridDay', 'listMonth'],\r\n                        default: 'dayGridMonth',\r\n                    },\r\n                    {\r\n                        label: 'name',\r\n                        name: 'name',\r\n                        tooltip: 'used_only_with_relative',\r\n                        default: '',\r\n                    },\r\n                ],\r\n            }],\r\n            visDefaultStyle: {\r\n                width: '100%',\r\n                height: 355,\r\n                position: 'relative',\r\n            },\r\n            visPrev: 'widgets/fullcalendar/img/prev_fullcalendar.png',\r\n        };\r\n    }\r\n\r\n    static t(key, ...args) {\r\n        return I18n.t(`full_calendar_${key}`, ...args);\r\n    }\r\n\r\n    // eslint-disable-next-line class-methods-use-this\r\n    getWidgetInfo() {\r\n        return FullCalendar.getWidgetInfo();\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.widgetRef = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.updateEvents();\r\n    }\r\n\r\n    onRxDataChanged() {\r\n        this.updateEvents();\r\n    }\r\n\r\n    updateEvents = async () => {\r\n        const objects = await this.props.socket.getObjectViewCustom(\r\n            'schedule',\r\n            'schedule',\r\n            `fullcalendar.${this.state.rxData.instance}.`,\r\n            `fullcalendar.${this.state.rxData.instance}.\\u9999`,\r\n        );\r\n        let serverTimeZone = 0;\r\n        try {\r\n            const state = await this.props.socket.getState('fullcalendar.0.info.timeZone');\r\n            serverTimeZone = state?.val || 0;\r\n        } catch (e) {\r\n            // ignore\r\n        }\r\n        this.setState({ events: Object.values(objects), serverTimeZone });\r\n    };\r\n\r\n    changeEvents = events => {\r\n        this.setState({ events });\r\n    };\r\n\r\n    renderWidgetBody(props) {\r\n        super.renderWidgetBody(props);\r\n\r\n        if (!this.widgetRef.current?.offsetWidth) {\r\n            this.forceUpdate();\r\n        }\r\n\r\n        /* let width = (this.widgetRef.current?.offsetWidth || 0) - (this.state.rxData.hideDow ? 0 : 80);\r\n        if (width < 0) {\r\n            width = 0;\r\n        } */\r\n\r\n        const content = <div\r\n            className={this.props.classes.content}\r\n            ref={this.widgetRef}\r\n        >\r\n            <Calendar\r\n                events={this.state.events || []}\r\n                socket={this.props.socket}\r\n                instance={this.state.rxData.instance}\r\n                changeEvents={this.changeEvents}\r\n                updateEvents={this.updateEvents}\r\n                serverTimeZone={this.state.serverTimeZone || 0}\r\n                readOnly={this.state.rxData.readOnly || false}\r\n                hideLeftBlock={this.state.rxData.hideLeftBlock || false}\r\n                hideTopBlock={this.state.rxData.hideTopBlock || false}\r\n                viewMode={this.state.rxData.viewMode || null}\r\n                t={FullCalendar.t}\r\n                language={I18n.getLanguage()}\r\n            />\r\n        </div>;\r\n\r\n        if (this.state.rxStyle.position === 'relative') {\r\n            return this.wrapContent(content, null, { height: 'calc(100% - 24px)', width: 'calc(100% - 24px)' });\r\n        }\r\n\r\n        return content;\r\n    }\r\n}\r\n\r\nFullCalendar.propTypes = {\r\n    systemConfig: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    themeType: PropTypes.string,\r\n    style: PropTypes.object,\r\n    data: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(withTheme(FullCalendar));\r\n"],"names":["styles","Generic","FullCalendar","props","objects","serverTimeZone","state","e","events","key","args","content"],"sourceRoot":""}