/*! For license information please see src_FullCalendar_jsx-node_modules_react-transition-group_esm_CSSTransition_js-node_modules_re-2f3dc7.d87b4918.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkiobroker_vis_2_widgets_fullcalendar=self.webpackChunkiobroker_vis_2_widgets_fullcalendar||[]).push([["src_FullCalendar_jsx-node_modules_react-transition-group_esm_CSSTransition_js-node_modules_re-2f3dc7","node_modules_react_cjs_react-jsx-runtime_production_min_js"],{90910:function(e,t,a){a.r(t);var n=a(74165),s=a(15861),r=a(15671),o=a(43144),i=a(11752),l=a(61120),c=a(60136),d=a(27277),u=a(4819),p=a.n(u),f=a(15854),h=a.n(f),v=a(58503),m=a(94427),x=a(75606),g=a(88411),_=a(99165),y=a(54794),b=a(80184),k=function(e){(0,c.Z)(a,e);var t=(0,d.Z)(a);function a(e){var o;return(0,r.Z)(this,a),(o=t.call(this,e)).onEventsChanged=function(e,t){if(o.state.rxData.calendar||!(e.split(".").length>3)){var a=JSON.parse(JSON.stringify(o.state.events)),n=a.findIndex((function(t){return t._id===e}));-1!==n?t?a[n]=t:a.splice(n,1):a.push(t),o.setState({events:a})}},o.updateEvents=(0,s.Z)((0,n.Z)().mark((function e(){var t,a,s,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.props.context.socket.getObjectViewCustom("schedule","schedule",o.state.rxData.calendar?"".concat(o.state.rxData.calendar,"."):"fullcalendar.".concat(o.state.rxData.instance,"."),o.state.rxData.calendar?"".concat(o.state.rxData.calendar,".\u9999"):"fullcalendar.".concat(o.state.rxData.instance,".\u9999"));case 2:return t=e.sent,a=0,e.prev=4,e.next=7,o.props.context.socket.getState("fullcalendar.".concat(o.state.rxData.instance,".info.timeZone"));case 7:s=e.sent,a=(null===s||void 0===s?void 0:s.val)||0,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:r=Object.values(t),o.state.rxData.calendar||(r=r.filter((function(e){return e._id.split(".").length<=3}))),o.setState({events:r,serverTimeZone:a});case 16:case"end":return e.stop()}}),e,null,[[4,11]])}))),o.changeEvents=function(e){o.setState({events:e})},o.widgetRef=p().createRef(),o}return(0,o.Z)(a,[{key:"getWidgetInfo",value:function(){return a.getWidgetInfo()}},{key:"componentDidMount",value:function(){(0,i.Z)((0,l.Z)(a.prototype),"componentDidMount",this).call(this),this.props.context.socket.subscribeObject(this.state.rxData.calendar?"".concat(this.state.rxData.calendar,".*"):"fullcalendar.".concat(this.state.rxData.instance,".*"),this.onEventsChanged),this.updateEvents()}},{key:"componentWillUnmount",value:function(){this.props.context.socket.unsubscribeObject(this.state.rxData.calendar?"".concat(this.state.rxData.calendar,".*"):"fullcalendar.".concat(this.state.rxData.instance,".*"),this.onEventsChanged),(0,i.Z)((0,l.Z)(a.prototype),"componentWillUnmount",this).call(this)}},{key:"onRxDataChanged",value:function(){this.updateEvents()}},{key:"renderWidgetBody",value:function(e){var t,n;(0,i.Z)((0,l.Z)(a.prototype),"renderWidgetBody",this).call(this,e),null!==(t=this.widgetRef.current)&&void 0!==t&&t.offsetWidth||this.forceUpdate();var s=(0,b.jsx)("div",{className:this.props.classes.content,ref:this.widgetRef,children:(0,b.jsx)(_.Z,{widget:!0,systemConfig:this.props.systemConfig?this.props.systemConfig.common:null===(n=this.props.context.systemConfig)||void 0===n?void 0:n.common,events:this.state.events||[],socket:this.props.context.socket,instance:this.state.rxData.instance,changeEvents:this.changeEvents,updateEvents:this.updateEvents,serverTimeZone:this.state.serverTimeZone||0,readOnly:this.state.rxData.readOnly||!1,hideLeftBlock:this.state.rxData.hideLeftBlock||!1,hideTopBlock:this.state.rxData.hideTopBlock||!1,hideLeftBlockHint:this.state.rxData.hideLeftBlockHint||!1,hideTopBlockButtons:this.state.rxData.hideTopBlockButtons||!1,viewMode:this.state.rxData.viewMode||null,storageName:"fc_".concat(this.props.id),hideWeekends:this.state.rxData.hideWeekends||!1,t:a.t,language:x.I18n.getLanguage(),dayStep:this.state.rxData.dayStep||30},this.state.rxData.viewMode)});return"relative"===this.state.rxStyle.position?this.wrapContent(s,null,{height:"calc(100% - 24px)",width:"calc(100% - 24px)"},null,null,{Card:m.Card,CardContent:m.CardContent}):s}}],[{key:"getWidgetInfo",value:function(){return{id:"tplFullCalendar",visSet:"fullcalendar",visWidgetLabel:"fullcalendar",visSetLabel:"set_label",visSetColor:"#112233",visName:"Full calendar",visAttrs:[{name:"common",fields:[{label:"instance",name:"instance",type:"instance",adapter:"fullcalendar",isShort:!0},{label:"calendar",name:"calendar",type:"custom",component:function(e,t,a,n){return(0,b.jsx)(y.Z,{instance:t.instance,value:t.calendar,onChange:function(e){return a({calendar:e})},socket:n.context.socket},t.instance)},default:""},{label:"read_only",name:"readOnly",type:"checkbox",default:!1},{label:"hide_left_block",name:"hideLeftBlock",type:"checkbox",hidden:function(e){return e.readOnly},default:!1},{label:"hide_left_block_hint",name:"hideLeftBlockHint",type:"checkbox",hidden:function(e){return e.readOnly||e.hideLeftBlock},default:!1},{label:"hide_top_block",name:"hideTopBlock",type:"checkbox",default:!1},{label:"hide_top_block_buttons",name:"hideTopBlockButtons",type:"checkbox",hidden:function(e){return e.hide_top_block},default:!1},{label:"hide_weekends",name:"hideWeekends",type:"checkbox",default:!1},{label:"view_mode",name:"viewMode",type:"select",options:[{label:"full_calendar_dayGridMonth",value:"dayGridMonth"},{label:"full_calendar_timeGridWeek",value:"timeGridWeek"},{label:"full_calendar_timeGridDay",value:"timeGridDay"},{label:"full_calendar_listMonth",value:"listMonth"}],default:"dayGridMonth"},{label:"name",name:"name",tooltip:"used_only_with_relative",default:"",hidden:function(e,t,a){return a&&"relative"!==a.position}},{label:"day_step",tooltip:"day_step_minutes",name:"dayStep",default:30,type:"select",noTranslation:!0,hidden:function(e){return"timeGridDay"!==e.viewMode&&"timeGridWeek"!==e.viewMode},options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20},{label:"30",value:30},{label:"60",value:60}]}]}],visDefaultStyle:{width:"100%",height:355,position:"relative"},visPrev:"widgets/fullcalendar/img/prev_fullcalendar.png"}}},{key:"t",value:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return x.I18n.t.apply(x.I18n,["full_calendar_".concat(e)].concat(a))}}]),a}(window.visRxWidget||g.VisRxWidget);k.propTypes={style:h().object,data:h().object,context:h().object},t.default=(0,v.withStyles)((function(){return{content:{display:"flex",width:"100%",height:"100%",overflow:"auto"}}}))((0,v.withTheme)(k))},56674:function(e,t,a){a.d(t,{Z:function(){return f}});var n=a(87462),s=a(63366),r=a(94578);a(15854);function o(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var i=a(4819),l=a.n(i),c=a(18875),d=a(88852),u=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return n=t,void((a=e).classList?a.classList.remove(n):"string"===typeof a.className?a.className=o(a.className,n):a.setAttribute("class",o(a.className&&a.className.baseVal||"",n)));var a,n}))},p=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,a){var n=t.resolveArguments(e,a),s=n[0],r=n[1];t.removeClasses(s,"exit"),t.addClass(s,r?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,a)},t.onEntering=function(e,a){var n=t.resolveArguments(e,a),s=n[0],r=n[1]?"appear":"enter";t.addClass(s,r,"active"),t.props.onEntering&&t.props.onEntering(e,a)},t.onEntered=function(e,a){var n=t.resolveArguments(e,a),s=n[0],r=n[1]?"appear":"enter";t.removeClasses(s,r),t.addClass(s,r,"done"),t.props.onEntered&&t.props.onEntered(e,a)},t.onExit=function(e){var a=t.resolveArguments(e)[0];t.removeClasses(a,"appear"),t.removeClasses(a,"enter"),t.addClass(a,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var a=t.resolveArguments(e)[0];t.addClass(a,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var a=t.resolveArguments(e)[0];t.removeClasses(a,"exit"),t.addClass(a,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,a){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,a]},t.getClassNames=function(e){var a=t.props.classNames,n="string"===typeof a,s=n?""+(n&&a?a+"-":"")+e:a[e];return{baseClassName:s,activeClassName:n?s+"-active":a[e+"Active"],doneClassName:n?s+"-done":a[e+"Done"]}},t}(0,r.Z)(t,e);var a=t.prototype;return a.addClass=function(e,t,a){var n=this.getClassNames(t)[a+"ClassName"],s=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===a&&s&&(n+=" "+s),"active"===a&&e&&(0,d.Q)(e),n&&(this.appliedClasses[t][a]=n,function(e,t){e&&t&&t.split(" ").forEach((function(t){return n=t,void((a=e).classList?a.classList.add(n):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(a,n)||("string"===typeof a.className?a.className=a.className+" "+n:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+n)));var a,n}))}(e,n))},a.removeClasses=function(e,t){var a=this.appliedClasses[t],n=a.base,s=a.active,r=a.done;this.appliedClasses[t]={},n&&u(e,n),s&&u(e,s),r&&u(e,r)},a.render=function(){var e=this.props,t=(e.classNames,(0,s.Z)(e,["classNames"]));return l().createElement(c.ZP,(0,n.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l().Component);p.defaultProps={classNames:""},p.propTypes={};var f=p},66374:function(e,t,a){var n=a(4819),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,a){var n,r={},c=null,d=null;for(n in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===r[n]&&(r[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:d,props:r,_owner:i.current}}t.Fragment=r,t.jsx=c,t.jsxs=c}}]);
//# sourceMappingURL=src_FullCalendar_jsx-node_modules_react-transition-group_esm_CSSTransition_js-node_modules_re-2f3dc7.d87b4918.chunk.js.map