/*! For license information please see src_FullCalendar_jsx-node_modules_react_cjs_react-jsx-runtime_production_min_js-src_Component-ea962d.55300f5c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkiobroker_vis_2_widgets_fullcalendar=self.webpackChunkiobroker_vis_2_widgets_fullcalendar||[]).push([["src_FullCalendar_jsx-node_modules_react_cjs_react-jsx-runtime_production_min_js-src_Component-ea962d"],{90910:function(e,t,n){n.r(t);var a=n(74165),s=n(15861),r=n(15671),i=n(43144),l=n(11752),o=n(61120),c=n(60136),d=n(27277),u=n(4819),h=n.n(u),p=n(15854),f=n.n(p),v=n(58503),b=n(94427),x=n(75606),_=n(88411),k=n(99165),y=n(54794),m=n(80184),g=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).onEventsChanged=function(e,t){if(i.state.rxData.calendar||!(e.split(".").length>3)){var n=JSON.parse(JSON.stringify(i.state.events)),a=n.findIndex((function(t){return t._id===e}));-1!==a?t?n[a]=t:n.splice(a,1):n.push(t),i.setState({events:n})}},i.updateEvents=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,s,r,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.state.rxData.calendar?"".concat(i.state.rxData.calendar,".*"):i.state.rxData.instance||0===i.state.rxData.instance?"fullcalendar.".concat(i.state.rxData.instance,".*"):"",i.subscribed===t){e.next=11;break}if(e.t0=i.subscribed,!e.t0){e.next=6;break}return e.next=6,i.props.context.socket.unsubscribeObject(i.subscribed,i.onEventsChanged);case 6:if(i.subscribed=t,e.t1=i.subscribed,!e.t1){e.next=11;break}return e.next=11,i.props.context.socket.subscribeObject(i.subscribed,i.onEventsChanged);case 11:if(i.subscribed){e.next=14;break}return i.setState({events:[]}),e.abrupt("return");case 14:return e.next=16,i.props.context.socket.getObjectViewCustom("schedule","schedule",i.state.rxData.calendar?"".concat(i.state.rxData.calendar,"."):"fullcalendar.".concat(i.state.rxData.instance,"."),i.state.rxData.calendar?"".concat(i.state.rxData.calendar,".\u9999"):"fullcalendar.".concat(i.state.rxData.instance,".\u9999"));case 16:return n=e.sent,s=0,e.prev=18,e.next=21,i.props.context.socket.getState("fullcalendar.".concat(i.state.rxData.instance,".info.timeZone"));case 21:r=e.sent,s=(null===r||void 0===r?void 0:r.val)||0,e.next=27;break;case 25:e.prev=25,e.t2=e.catch(18);case 27:l=Object.values(n),i.state.rxData.calendar||(l=l.filter((function(e){return e._id.split(".").length<=3}))),i.setState({events:l,serverTimeZone:s});case 30:case"end":return e.stop()}}),e,null,[[18,25]])}))),i.changeEvents=function(e){i.setState({events:e})},i.setEvent=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.props.context.socket.setObject(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i.deleteEvent=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.props.context.socket.delObject(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.widgetRef=h().createRef(),i}return(0,i.Z)(n,[{key:"getWidgetInfo",value:function(){return n.getWidgetInfo()}},{key:"componentDidMount",value:function(){(0,l.Z)((0,o.Z)(n.prototype),"componentDidMount",this).call(this),this.updateEvents()}},{key:"componentWillUnmount",value:function(){this.subscribed&&this.props.context.socket.unsubscribeObject(this.subscribed,this.onEventsChanged),this.subscribed=null,(0,l.Z)((0,o.Z)(n.prototype),"componentWillUnmount",this).call(this)}},{key:"onRxDataChanged",value:function(){this.updateEvents()}},{key:"renderWidgetBody",value:function(e){var t,a,s;((0,l.Z)((0,o.Z)(n.prototype),"renderWidgetBody",this).call(this,e),null!==(t=this.widgetRef.current)&&void 0!==t&&t.offsetWidth||this.forceUpdate(),this.state.rxData.instance||0===this.state.rxData.instance)?a=(0,m.jsx)("div",{className:this.props.classes.content,ref:this.widgetRef,children:(0,m.jsx)(k.Z,{widget:!0,systemConfig:this.props.systemConfig?this.props.systemConfig.common:null===(s=this.props.context.systemConfig)||void 0===s?void 0:s.common,events:this.state.events||[],socket:this.props.context.socket,instance:this.state.rxData.instance,calendarPrefix:"fullcalendar.".concat(this.state.rxData.instance),changeEvents:this.changeEvents,updateEvents:this.updateEvents,setEvent:this.setEvent,deleteEvent:this.deleteEvent,serverTimeZone:this.state.serverTimeZone||0,readOnly:this.state.rxData.readOnly||!1,hideLeftBlock:this.state.rxData.hideLeftBlock||!1,hideTopBlock:this.state.rxData.hideTopBlock||!1,hideLeftBlockHint:this.state.rxData.hideLeftBlockHint||!1,hideTopBlockButtons:this.state.rxData.hideTopBlockButtons||!1,viewMode:this.state.rxData.viewMode||null,storageName:"fc_".concat(this.props.id),hideWeekends:this.state.rxData.hideWeekends||!1,t:n.t,language:x.I18n.getLanguage(),dayStep:this.state.rxData.dayStep||30},this.state.rxData.viewMode)}):a=(0,m.jsx)("div",{className:this.props.classes.content,ref:this.widgetRef,children:n.t("Please select instance")});return"relative"===this.state.rxStyle.position?this.wrapContent(a,null,{height:"calc(100% - 24px)",width:"calc(100% - 24px)"},null,null,{Card:b.Card,CardContent:b.CardContent}):a}}],[{key:"getWidgetInfo",value:function(){return{id:"tplFullCalendar",visSet:"fullcalendar",visWidgetLabel:"fullcalendar",visSetLabel:"set_label",visSetColor:"#112233",visName:"Full calendar",visAttrs:[{name:"common",fields:[{label:"instance",name:"instance",type:"instance",adapter:"fullcalendar",isShort:!0},{label:"calendar",name:"calendar",type:"custom",component:function(e,t,n,a){return(0,m.jsx)(y.Z,{instance:t.instance,value:t.calendar,onChange:function(e){return n({calendar:e})},socket:a.context.socket},t.instance)},default:""},{label:"read_only",name:"readOnly",type:"checkbox",default:!1},{label:"hide_left_block",name:"hideLeftBlock",type:"checkbox",hidden:function(e){return e.readOnly},default:!1},{label:"hide_left_block_hint",name:"hideLeftBlockHint",type:"checkbox",hidden:function(e){return e.readOnly||e.hideLeftBlock},default:!1},{label:"hide_top_block",name:"hideTopBlock",type:"checkbox",default:!1},{label:"hide_top_block_buttons",name:"hideTopBlockButtons",type:"checkbox",hidden:function(e){return e.hide_top_block},default:!1},{label:"hide_weekends",name:"hideWeekends",type:"checkbox",default:!1},{label:"view_mode",name:"viewMode",type:"select",options:[{label:"full_calendar_dayGridMonth",value:"dayGridMonth"},{label:"full_calendar_timeGridWeek",value:"timeGridWeek"},{label:"full_calendar_timeGridDay",value:"timeGridDay"},{label:"full_calendar_listMonth",value:"listMonth"}],default:"dayGridMonth"},{label:"name",name:"name",tooltip:"used_only_with_relative",default:"",hidden:function(e,t,n){return n&&"relative"!==n.position}},{label:"day_step",tooltip:"day_step_minutes",name:"dayStep",default:30,type:"select",noTranslation:!0,hidden:function(e){return"timeGridDay"!==e.viewMode&&"timeGridWeek"!==e.viewMode},options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20},{label:"30",value:30},{label:"60",value:60}]}]}],visDefaultStyle:{width:"100%",height:355,position:"relative"},visPrev:"widgets/fullcalendar/img/prev_fullcalendar.png"}}},{key:"t",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return x.I18n.t.apply(x.I18n,["full_calendar_".concat(e)].concat(n))}}]),n}(window.visRxWidget||_.VisRxWidget);g.propTypes={style:f().object,data:f().object,context:f().object},t.default=(0,v.withStyles)((function(){return{content:{display:"flex",width:"100%",height:"100%",overflow:"auto"}}}))((0,v.withTheme)(g))},66374:function(e,t,n){var a=n(4819),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var a,r={},c=null,d=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,a)&&!o.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:s,type:e,key:c,ref:d,props:r,_owner:l.current}}t.Fragment=r,t.jsx=c,t.jsxs=c}}]);
//# sourceMappingURL=src_FullCalendar_jsx-node_modules_react_cjs_react-jsx-runtime_production_min_js-src_Component-ea962d.55300f5c.chunk.js.map