"use strict";(self.webpackChunkiobroker_vis_2_widgets_fullcalendar=self.webpackChunkiobroker_vis_2_widgets_fullcalendar||[]).push([["src_FullCalendar_jsx-src_Component_styles_css"],{4278:function(B,D,s){s.r(D);var y=s(4819),c=s.n(y),b=s(15854),r=s.n(b),h=s(58503),W=s.n(h),_=s(94427),T=s.n(_),u=s(75606),L=s.n(u),E=s(88411),R=s.n(E),g=s(74095),x=s(82809),M=Object.defineProperty,O=(i,e,t)=>e in i?M(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,f=(i,e,t)=>(O(i,typeof e!="symbol"?e+"":e,t),t),C=(i,e,t)=>new Promise((l,a)=>{var n=d=>{try{p(t.next(d))}catch(m){a(m)}},v=d=>{try{p(t.throw(d))}catch(m){a(m)}},p=d=>d.done?l(d.value):Promise.resolve(d.value).then(n,v);p((t=t.apply(i,e)).next())});const P=()=>({content:{display:"flex",width:"100%",height:"100%",overflow:"auto"}}),k=window.visRxWidget||E.VisRxWidget;class o extends k{constructor(e){super(e),f(this,"onEventsChanged",(t,l)=>{if(!this.state.rxData.calendar&&t.split(".").length>3)return;const a=JSON.parse(JSON.stringify(this.state.events)),n=a.findIndex(v=>v._id===t);n!==-1?l?a[n]=l:a.splice(n,1):a.push(l),this.setState({events:a})}),f(this,"updateEvents",()=>C(this,null,function*(){const t=yield this.props.socket.getObjectViewCustom("schedule","schedule",this.state.rxData.calendar?`${this.state.rxData.calendar}.`:`fullcalendar.${this.state.rxData.instance}.`,this.state.rxData.calendar?`${this.state.rxData.calendar}.\u9999`:`fullcalendar.${this.state.rxData.instance}.\u9999`);let l=0;try{const n=yield this.props.socket.getState(`fullcalendar.${this.state.rxData.instance}.info.timeZone`);l=(n==null?void 0:n.val)||0}catch(n){}let a=Object.values(t);this.state.rxData.calendar||(a=a.filter(n=>n._id.split(".").length<=3)),this.setState({events:a,serverTimeZone:l})})),f(this,"changeEvents",t=>{this.setState({events:t})}),this.widgetRef=c().createRef()}static getWidgetInfo(){return{id:"tplFullCalendar",visSet:"fullcalendar",visWidgetLabel:"fullcalendar",visSetLabel:"set_label",visSetColor:"#112233",visName:"Full calendar",visAttrs:[{name:"common",fields:[{label:"instance",name:"instance",type:"instance",adapter:"fullcalendar",isShort:!0},{label:"calendar",name:"calendar",type:"custom",component:(e,t,l,a)=>c().createElement(x.Z,{key:t.instance,instance:t.instance,value:t.calendar,onChange:n=>l({calendar:n}),socket:a.socket}),default:""},{label:"read_only",name:"readOnly",type:"checkbox",default:!1},{label:"hide_left_block",name:"hideLeftBlock",type:"checkbox",hidden:e=>e.readOnly,default:!1},{label:"hide_left_block_hint",name:"hideLeftBlockHint",type:"checkbox",hidden:e=>e.readOnly||e.hideLeftBlock,default:!1},{label:"hide_top_block",name:"hideTopBlock",type:"checkbox",default:!1},{label:"hide_top_block_buttons",name:"hideTopBlockButtons",type:"checkbox",hidden:e=>e.hide_top_block,default:!1},{label:"hide_weekends",name:"hideWeekends",type:"checkbox",default:!1},{label:"view_mode",name:"viewMode",type:"select",options:[{label:"full_calendar_dayGridMonth",value:"dayGridMonth"},{label:"full_calendar_timeGridWeek",value:"timeGridWeek"},{label:"full_calendar_timeGridDay",value:"timeGridDay"},{label:"full_calendar_listMonth",value:"listMonth"}],default:"dayGridMonth"},{label:"name",name:"name",tooltip:"used_only_with_relative",default:"",hidden:(e,t,l)=>l&&l.position!=="relative"},{label:"day_step",tooltip:"day_step_minutes",name:"dayStep",default:30,type:"select",noTranslation:!0,hidden:e=>e.viewMode!=="timeGridDay"&&e.viewMode!=="timeGridWeek",options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20},{label:"30",value:30},{label:"60",value:60}]}]}],visDefaultStyle:{width:"100%",height:355,position:"relative"},visPrev:"widgets/fullcalendar/img/prev_fullcalendar.png"}}static t(e,...t){return u.I18n.t(`full_calendar_${e}`,...t)}getWidgetInfo(){return o.getWidgetInfo()}componentDidMount(){super.componentDidMount(),this.props.socket.subscribeObject(this.state.rxData.calendar?`${this.state.rxData.calendar}.*`:`fullcalendar.${this.state.rxData.instance}.*`,this.onEventsChanged),this.updateEvents()}componentWillUnmount(){this.props.socket.unsubscribeObject(this.state.rxData.calendar?`${this.state.rxData.calendar}.*`:`fullcalendar.${this.state.rxData.instance}.*`,this.onEventsChanged),super.componentWillUnmount()}onRxDataChanged(){this.updateEvents()}renderWidgetBody(e){var t,l;super.renderWidgetBody(e),(t=this.widgetRef.current)!=null&&t.offsetWidth||this.forceUpdate();const a=c().createElement("div",{className:this.props.classes.content,ref:this.widgetRef},c().createElement(g.Z,{widget:!0,systemConfig:(l=this.props.systemConfig)==null?void 0:l.common,key:this.state.rxData.viewMode,events:this.state.events||[],socket:this.props.socket,instance:this.state.rxData.instance,changeEvents:this.changeEvents,updateEvents:this.updateEvents,serverTimeZone:this.state.serverTimeZone||0,readOnly:this.state.rxData.readOnly||!1,hideLeftBlock:this.state.rxData.hideLeftBlock||!1,hideTopBlock:this.state.rxData.hideTopBlock||!1,hideLeftBlockHint:this.state.rxData.hideLeftBlockHint||!1,hideTopBlockButtons:this.state.rxData.hideTopBlockButtons||!1,viewMode:this.state.rxData.viewMode||null,storageName:`fc_${this.props.id}`,hideWeekends:this.state.rxData.hideWeekends||!1,t:o.t,language:u.I18n.getLanguage(),dayStep:this.state.rxData.dayStep||30}));return this.state.rxStyle.position==="relative"?this.wrapContent(a,null,{height:"calc(100% - 24px)",width:"calc(100% - 24px)"},null,null,{Card:_.Card,CardContent:_.CardContent}):a}}o.propTypes={systemConfig:r().object,socket:r().object,themeType:r().string,style:r().object,data:r().object},D.default=(0,h.withStyles)(P)((0,h.withTheme)(o))}}]);

//# sourceMappingURL=src_FullCalendar_jsx-src_Component_styles_css.10dbe454.chunk.js.map