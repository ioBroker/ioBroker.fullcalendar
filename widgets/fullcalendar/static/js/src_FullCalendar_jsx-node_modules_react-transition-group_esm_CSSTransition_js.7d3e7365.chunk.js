"use strict";(self.webpackChunkiobroker_vis_2_widgets_fullcalendar=self.webpackChunkiobroker_vis_2_widgets_fullcalendar||[]).push([["src_FullCalendar_jsx-node_modules_react-transition-group_esm_CSSTransition_js"],{4278:function(N,b,l){l.r(b);var y=l(4819),p=l.n(y),M=l(15854),_=l.n(M),C=l(58503),B=l.n(C),m=l(94427),W=l.n(m),g=l(75606),P=l.n(g),O=l(88411),A=l.n(O),T=l(83178),E=Object.defineProperty,x=(c,t,e)=>t in c?E(c,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[t]=e,D=(c,t,e)=>(x(c,typeof t!="symbol"?t+"":t,e),e),i=(c,t,e)=>new Promise((a,n)=>{var o=v=>{try{f(e.next(v))}catch(L){n(L)}},h=v=>{try{f(e.throw(v))}catch(L){n(L)}},f=v=>v.done?a(v.value):Promise.resolve(v.value).then(o,h);f((e=e.apply(c,t)).next())});const r=()=>({content:{display:"flex",width:"100%",height:"100%",overflow:"auto"}}),u=window.visRxWidget||O.VisRxWidget;class s extends p().Component{constructor(t){super(t),this.state={list:[{value:"",label:u.t("default")}]}}static getText(t){return typeof t=="object"?t[g.I18n.getLanguage()]||t.en:t}componentDidMount(){this.props.instance&&this.props.socket.getObjectViewSystem("folder",`fullcalendar.${this.props.instance}.Calendars.`,`fullcalendar.${this.props.instance}.Calendars.\u9999`).then(t=>{const e=Object.keys(t).map(a=>({value:a,label:s.getText(t[a].common.name)}));e.unshift({value:"",label:u.t("default")}),this.setState({list:e})})}render(){return p().createElement(m.Select,{variant:"standard",fullWidth:!0,value:this.props.value||"",onChange:t=>this.props.onChange(t.target.value)},this.state.list.map(t=>p().createElement(m.MenuItem,{key:t.value},t.label)))}}class d extends u{constructor(t){super(t),D(this,"onEventsChanged",(e,a)=>{if(!this.state.rxData.calendar&&e.split(".").length>3)return;const n=JSON.parse(JSON.stringify(this.state.events)),o=n.findIndex(h=>h._id===e);o!==-1?a?n[o]=a:n.splice(o,1):n.push(a),this.setState({events:n})}),D(this,"updateEvents",()=>i(this,null,function*(){const e=yield this.props.socket.getObjectViewCustom("schedule","schedule",this.state.rxData.calendar?`${this.state.rxData.calendar}.`:`fullcalendar.${this.state.rxData.instance}.`,this.state.rxData.calendar?`${this.state.rxData.calendar}.\u9999`:`fullcalendar.${this.state.rxData.instance}.\u9999`);let a=0;try{const o=yield this.props.socket.getState(`fullcalendar.${this.state.rxData.instance}.info.timeZone`);a=(o==null?void 0:o.val)||0}catch(o){}let n=Object.values(e);this.state.rxData.calendar||(n=n.filter(o=>o._id.split(".").length<=3)),this.setState({events:n,serverTimeZone:a})})),D(this,"changeEvents",e=>{this.setState({events:e})}),this.widgetRef=p().createRef()}static getWidgetInfo(){return{id:"tplFullCalendar",visSet:"fullcalendar",visWidgetLabel:"fullcalendar",visSetLabel:"set_label",visSetColor:"#112233",visName:"Full calendar",visAttrs:[{name:"common",fields:[{label:"instance",name:"instance",type:"instance",adapter:"fullcalendar",isShort:!0},{label:"calendar",name:"calendar",type:"custom",component:(t,e,a,n)=>p().createElement(s,{key:e.instance,instance:e.instance,value:e.calendar,onChange:o=>a({calendar:o}),socket:n.socket}),default:""},{label:"read_only",name:"readOnly",type:"checkbox",default:!1},{label:"hide_left_block",name:"hideLeftBlock",type:"checkbox",hidden:t=>t.readOnly,default:!1},{label:"hide_left_block_hint",name:"hideLeftBlockHint",type:"checkbox",hidden:t=>t.readOnly||t.hideLeftBlock,default:!1},{label:"hide_top_block",name:"hideTopBlock",type:"checkbox",default:!1},{label:"hide_top_block_buttons",name:"hideTopBlockButtons",type:"checkbox",hidden:t=>t.hide_top_block,default:!1},{label:"hide_weekends",name:"hideWeekends",type:"checkbox",default:!1},{label:"view_mode",name:"viewMode",type:"select",options:[{label:"full_calendar_dayGridMonth",value:"dayGridMonth"},{label:"full_calendar_timeGridWeek",value:"timeGridWeek"},{label:"full_calendar_timeGridDay",value:"timeGridDay"},{label:"full_calendar_listMonth",value:"listMonth"}],default:"dayGridMonth"},{label:"name",name:"name",tooltip:"used_only_with_relative",default:"",hidden:(t,e,a)=>a&&a.position!=="relative"}]}],visDefaultStyle:{width:"100%",height:355,position:"relative"},visPrev:"widgets/fullcalendar/img/prev_fullcalendar.png"}}static t(t,...e){return g.I18n.t(`full_calendar_${t}`,...e)}getWidgetInfo(){return d.getWidgetInfo()}componentDidMount(){super.componentDidMount(),this.props.socket.subscribeObject(this.state.rxData.calendar?`${this.state.rxData.calendar}.*`:`fullcalendar.${this.state.rxData.instance}.*`,this.onEventsChanged),this.updateEvents()}componentWillUnmount(){this.props.socket.unsubscribeObject(this.state.rxData.calendar?`${this.state.rxData.calendar}.*`:`fullcalendar.${this.state.rxData.instance}.*`,this.onEventsChanged),super.componentWillUnmount()}onRxDataChanged(){this.updateEvents()}renderWidgetBody(t){var e,a;super.renderWidgetBody(t),(e=this.widgetRef.current)!=null&&e.offsetWidth||this.forceUpdate();const n=p().createElement("div",{className:this.props.classes.content,ref:this.widgetRef},p().createElement(T.Z,{widget:!0,systemConfig:(a=this.props.systemConfig)==null?void 0:a.common,key:this.state.rxData.viewMode,events:this.state.events||[],socket:this.props.socket,instance:this.state.rxData.instance,changeEvents:this.changeEvents,updateEvents:this.updateEvents,serverTimeZone:this.state.serverTimeZone||0,readOnly:this.state.rxData.readOnly||!1,hideLeftBlock:this.state.rxData.hideLeftBlock||!1,hideTopBlock:this.state.rxData.hideTopBlock||!1,hideLeftBlockHint:this.state.rxData.hideLeftBlockHint||!1,hideTopBlockButtons:this.state.rxData.hideTopBlockButtons||!1,viewMode:this.state.rxData.viewMode||null,storageName:`fc_${this.props.id}`,hideWeekends:this.state.rxData.hideWeekends||!1,t:d.t,language:g.I18n.getLanguage()}));return this.state.rxStyle.position==="relative"?this.wrapContent(n,null,{height:"calc(100% - 24px)",width:"calc(100% - 24px)"},null,null,{Card:m.Card,CardContent:m.CardContent}):n}}d.propTypes={systemConfig:_().object,socket:_().object,themeType:_().string,style:_().object,data:_().object},b.default=(0,C.withStyles)(r)((0,C.withTheme)(d))},22171:function(N,b,l){l.d(b,{Z:function(){return D}});var y=l(87462),p=l(63366),M=l(51721),_=l(15854);function C(i,r){return i.classList?!!r&&i.classList.contains(r):(" "+(i.className.baseVal||i.className)+" ").indexOf(" "+r+" ")!==-1}function B(i,r){i.classList?i.classList.add(r):C(i,r)||(typeof i.className=="string"?i.className=i.className+" "+r:i.setAttribute("class",(i.className&&i.className.baseVal||"")+" "+r))}function m(i,r){return i.replace(new RegExp("(^|\\s)"+r+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function W(i,r){i.classList?i.classList.remove(r):typeof i.className=="string"?i.className=m(i.className,r):i.setAttribute("class",m(i.className&&i.className.baseVal||"",r))}var g=l(4819),P=l.n(g),O=l(24561),A=l(97735),T=function(r,u){return r&&u&&u.split(" ").forEach(function(s){return B(r,s)})},E=function(r,u){return r&&u&&u.split(" ").forEach(function(s){return W(r,s)})},x=function(i){(0,M.Z)(r,i);function r(){for(var s,d=arguments.length,c=new Array(d),t=0;t<d;t++)c[t]=arguments[t];return s=i.call.apply(i,[this].concat(c))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(e,a){var n=s.resolveArguments(e,a),o=n[0],h=n[1];s.removeClasses(o,"exit"),s.addClass(o,h?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(e,a)},s.onEntering=function(e,a){var n=s.resolveArguments(e,a),o=n[0],h=n[1],f=h?"appear":"enter";s.addClass(o,f,"active"),s.props.onEntering&&s.props.onEntering(e,a)},s.onEntered=function(e,a){var n=s.resolveArguments(e,a),o=n[0],h=n[1],f=h?"appear":"enter";s.removeClasses(o,f),s.addClass(o,f,"done"),s.props.onEntered&&s.props.onEntered(e,a)},s.onExit=function(e){var a=s.resolveArguments(e),n=a[0];s.removeClasses(n,"appear"),s.removeClasses(n,"enter"),s.addClass(n,"exit","base"),s.props.onExit&&s.props.onExit(e)},s.onExiting=function(e){var a=s.resolveArguments(e),n=a[0];s.addClass(n,"exit","active"),s.props.onExiting&&s.props.onExiting(e)},s.onExited=function(e){var a=s.resolveArguments(e),n=a[0];s.removeClasses(n,"exit"),s.addClass(n,"exit","done"),s.props.onExited&&s.props.onExited(e)},s.resolveArguments=function(e,a){return s.props.nodeRef?[s.props.nodeRef.current,e]:[e,a]},s.getClassNames=function(e){var a=s.props.classNames,n=typeof a=="string",o=n&&a?a+"-":"",h=n?""+o+e:a[e],f=n?h+"-active":a[e+"Active"],v=n?h+"-done":a[e+"Done"];return{baseClassName:h,activeClassName:f,doneClassName:v}},s}var u=r.prototype;return u.addClass=function(d,c,t){var e=this.getClassNames(c)[t+"ClassName"],a=this.getClassNames("enter"),n=a.doneClassName;c==="appear"&&t==="done"&&n&&(e+=" "+n),t==="active"&&d&&(0,A.Q)(d),e&&(this.appliedClasses[c][t]=e,T(d,e))},u.removeClasses=function(d,c){var t=this.appliedClasses[c],e=t.base,a=t.active,n=t.done;this.appliedClasses[c]={},e&&E(d,e),a&&E(d,a),n&&E(d,n)},u.render=function(){var d=this.props,c=d.classNames,t=(0,p.Z)(d,["classNames"]);return P().createElement(O.ZP,(0,y.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(P().Component);x.defaultProps={classNames:""},x.propTypes={};var D=x}}]);

//# sourceMappingURL=src_FullCalendar_jsx-node_modules_react-transition-group_esm_CSSTransition_js.7d3e7365.chunk.js.map