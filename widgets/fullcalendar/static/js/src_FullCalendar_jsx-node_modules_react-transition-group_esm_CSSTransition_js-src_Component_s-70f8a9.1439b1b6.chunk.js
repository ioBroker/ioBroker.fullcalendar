"use strict";(self.webpackChunkiobroker_vis_2_widgets_fullcalendar=self.webpackChunkiobroker_vis_2_widgets_fullcalendar||[]).push([["src_FullCalendar_jsx-node_modules_react-transition-group_esm_CSSTransition_js-src_Component_s-70f8a9"],{4278:function(N,D,r){r.r(D);var y=r(4819),p=r.n(y),M=r(15854),_=r.n(M),E=r(58503),L=r.n(E),m=r(94427),W=r.n(m),C=r(75606),O=r.n(C),b=r(88411),A=r.n(b),P=r(74095),g=r(82809),x=Object.defineProperty,T=(c,n,e)=>n in c?x(c,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[n]=e,i=(c,n,e)=>(T(c,typeof n!="symbol"?n+"":n,e),e),l=(c,n,e)=>new Promise((a,s)=>{var o=f=>{try{h(e.next(f))}catch(B){s(B)}},u=f=>{try{h(e.throw(f))}catch(B){s(B)}},h=f=>f.done?a(f.value):Promise.resolve(f.value).then(o,u);h((e=e.apply(c,n)).next())});const v=()=>({content:{display:"flex",width:"100%",height:"100%",overflow:"auto"}}),t=window.visRxWidget||b.VisRxWidget;class d extends t{constructor(n){super(n),i(this,"onEventsChanged",(e,a)=>{if(!this.state.rxData.calendar&&e.split(".").length>3)return;const s=JSON.parse(JSON.stringify(this.state.events)),o=s.findIndex(u=>u._id===e);o!==-1?a?s[o]=a:s.splice(o,1):s.push(a),this.setState({events:s})}),i(this,"updateEvents",()=>l(this,null,function*(){const e=yield this.props.socket.getObjectViewCustom("schedule","schedule",this.state.rxData.calendar?`${this.state.rxData.calendar}.`:`fullcalendar.${this.state.rxData.instance}.`,this.state.rxData.calendar?`${this.state.rxData.calendar}.\u9999`:`fullcalendar.${this.state.rxData.instance}.\u9999`);let a=0;try{const o=yield this.props.socket.getState(`fullcalendar.${this.state.rxData.instance}.info.timeZone`);a=(o==null?void 0:o.val)||0}catch(o){}let s=Object.values(e);this.state.rxData.calendar||(s=s.filter(o=>o._id.split(".").length<=3)),this.setState({events:s,serverTimeZone:a})})),i(this,"changeEvents",e=>{this.setState({events:e})}),this.widgetRef=p().createRef()}static getWidgetInfo(){return{id:"tplFullCalendar",visSet:"fullcalendar",visWidgetLabel:"fullcalendar",visSetLabel:"set_label",visSetColor:"#112233",visName:"Full calendar",visAttrs:[{name:"common",fields:[{label:"instance",name:"instance",type:"instance",adapter:"fullcalendar",isShort:!0},{label:"calendar",name:"calendar",type:"custom",component:(n,e,a,s)=>p().createElement(g.Z,{key:e.instance,instance:e.instance,value:e.calendar,onChange:o=>a({calendar:o}),socket:s.socket}),default:""},{label:"read_only",name:"readOnly",type:"checkbox",default:!1},{label:"hide_left_block",name:"hideLeftBlock",type:"checkbox",hidden:n=>n.readOnly,default:!1},{label:"hide_left_block_hint",name:"hideLeftBlockHint",type:"checkbox",hidden:n=>n.readOnly||n.hideLeftBlock,default:!1},{label:"hide_top_block",name:"hideTopBlock",type:"checkbox",default:!1},{label:"hide_top_block_buttons",name:"hideTopBlockButtons",type:"checkbox",hidden:n=>n.hide_top_block,default:!1},{label:"hide_weekends",name:"hideWeekends",type:"checkbox",default:!1},{label:"view_mode",name:"viewMode",type:"select",options:[{label:"full_calendar_dayGridMonth",value:"dayGridMonth"},{label:"full_calendar_timeGridWeek",value:"timeGridWeek"},{label:"full_calendar_timeGridDay",value:"timeGridDay"},{label:"full_calendar_listMonth",value:"listMonth"}],default:"dayGridMonth"},{label:"name",name:"name",tooltip:"used_only_with_relative",default:"",hidden:(n,e,a)=>a&&a.position!=="relative"},{label:"day_step",help:"day_step_minutes",name:"dayStep",default:30,type:"select",noTranslation:!0,hidden:n=>n.viewMode!=="timeGridDay"&&n.viewMode!=="timeGridWeek",options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20},{label:"30",value:30},{label:"60",value:60}]}]}],visDefaultStyle:{width:"100%",height:355,position:"relative"},visPrev:"widgets/fullcalendar/img/prev_fullcalendar.png"}}static t(n,...e){return C.I18n.t(`full_calendar_${n}`,...e)}getWidgetInfo(){return d.getWidgetInfo()}componentDidMount(){super.componentDidMount(),this.props.socket.subscribeObject(this.state.rxData.calendar?`${this.state.rxData.calendar}.*`:`fullcalendar.${this.state.rxData.instance}.*`,this.onEventsChanged),this.updateEvents()}componentWillUnmount(){this.props.socket.unsubscribeObject(this.state.rxData.calendar?`${this.state.rxData.calendar}.*`:`fullcalendar.${this.state.rxData.instance}.*`,this.onEventsChanged),super.componentWillUnmount()}onRxDataChanged(){this.updateEvents()}renderWidgetBody(n){var e,a;super.renderWidgetBody(n),(e=this.widgetRef.current)!=null&&e.offsetWidth||this.forceUpdate();const s=p().createElement("div",{className:this.props.classes.content,ref:this.widgetRef},p().createElement(P.Z,{widget:!0,systemConfig:(a=this.props.systemConfig)==null?void 0:a.common,key:this.state.rxData.viewMode,events:this.state.events||[],socket:this.props.socket,instance:this.state.rxData.instance,changeEvents:this.changeEvents,updateEvents:this.updateEvents,serverTimeZone:this.state.serverTimeZone||0,readOnly:this.state.rxData.readOnly||!1,hideLeftBlock:this.state.rxData.hideLeftBlock||!1,hideTopBlock:this.state.rxData.hideTopBlock||!1,hideLeftBlockHint:this.state.rxData.hideLeftBlockHint||!1,hideTopBlockButtons:this.state.rxData.hideTopBlockButtons||!1,viewMode:this.state.rxData.viewMode||null,storageName:`fc_${this.props.id}`,hideWeekends:this.state.rxData.hideWeekends||!1,t:d.t,language:C.I18n.getLanguage(),dayStep:this.state.rxData.dayStep||30}));return this.state.rxStyle.position==="relative"?this.wrapContent(s,null,{height:"calc(100% - 24px)",width:"calc(100% - 24px)"},null,null,{Card:m.Card,CardContent:m.CardContent}):s}}d.propTypes={systemConfig:_().object,socket:_().object,themeType:_().string,style:_().object,data:_().object},D.default=(0,E.withStyles)(v)((0,E.withTheme)(d))},22171:function(N,D,r){r.d(D,{Z:function(){return T}});var y=r(87462),p=r(63366),M=r(51721),_=r(15854);function E(i,l){return i.classList?!!l&&i.classList.contains(l):(" "+(i.className.baseVal||i.className)+" ").indexOf(" "+l+" ")!==-1}function L(i,l){i.classList?i.classList.add(l):E(i,l)||(typeof i.className=="string"?i.className=i.className+" "+l:i.setAttribute("class",(i.className&&i.className.baseVal||"")+" "+l))}function m(i,l){return i.replace(new RegExp("(^|\\s)"+l+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function W(i,l){i.classList?i.classList.remove(l):typeof i.className=="string"?i.className=m(i.className,l):i.setAttribute("class",m(i.className&&i.className.baseVal||"",l))}var C=r(4819),O=r.n(C),b=r(24561),A=r(97735),P=function(l,v){return l&&v&&v.split(" ").forEach(function(t){return L(l,t)})},g=function(l,v){return l&&v&&v.split(" ").forEach(function(t){return W(l,t)})},x=function(i){(0,M.Z)(l,i);function l(){for(var t,d=arguments.length,c=new Array(d),n=0;n<d;n++)c[n]=arguments[n];return t=i.call.apply(i,[this].concat(c))||this,t.appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,a){var s=t.resolveArguments(e,a),o=s[0],u=s[1];t.removeClasses(o,"exit"),t.addClass(o,u?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,a)},t.onEntering=function(e,a){var s=t.resolveArguments(e,a),o=s[0],u=s[1],h=u?"appear":"enter";t.addClass(o,h,"active"),t.props.onEntering&&t.props.onEntering(e,a)},t.onEntered=function(e,a){var s=t.resolveArguments(e,a),o=s[0],u=s[1],h=u?"appear":"enter";t.removeClasses(o,h),t.addClass(o,h,"done"),t.props.onEntered&&t.props.onEntered(e,a)},t.onExit=function(e){var a=t.resolveArguments(e),s=a[0];t.removeClasses(s,"appear"),t.removeClasses(s,"enter"),t.addClass(s,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var a=t.resolveArguments(e),s=a[0];t.addClass(s,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var a=t.resolveArguments(e),s=a[0];t.removeClasses(s,"exit"),t.addClass(s,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,a){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,a]},t.getClassNames=function(e){var a=t.props.classNames,s=typeof a=="string",o=s&&a?a+"-":"",u=s?""+o+e:a[e],h=s?u+"-active":a[e+"Active"],f=s?u+"-done":a[e+"Done"];return{baseClassName:u,activeClassName:h,doneClassName:f}},t}var v=l.prototype;return v.addClass=function(d,c,n){var e=this.getClassNames(c)[n+"ClassName"],a=this.getClassNames("enter"),s=a.doneClassName;c==="appear"&&n==="done"&&s&&(e+=" "+s),n==="active"&&d&&(0,A.Q)(d),e&&(this.appliedClasses[c][n]=e,P(d,e))},v.removeClasses=function(d,c){var n=this.appliedClasses[c],e=n.base,a=n.active,s=n.done;this.appliedClasses[c]={},e&&g(d,e),a&&g(d,a),s&&g(d,s)},v.render=function(){var d=this.props,c=d.classNames,n=(0,p.Z)(d,["classNames"]);return O().createElement(b.ZP,(0,y.Z)({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},l}(O().Component);x.defaultProps={classNames:""},x.propTypes={};var T=x}}]);

//# sourceMappingURL=src_FullCalendar_jsx-node_modules_react-transition-group_esm_CSSTransition_js-src_Component_s-70f8a9.1439b1b6.chunk.js.map