"use strict";(self.webpackChunkiobroker_vis_2_widgets_fullcalendar=self.webpackChunkiobroker_vis_2_widgets_fullcalendar||[]).push([["src_Component_Calendar_js-webpack_sharing_consume_default_iobroker_vis-2-widgets-react-dev_io-4dd1d1"],{83178:function(Me,_,o){o.d(_,{Z:function(){return Ae}});var T=o(4819),p=o(15854),u=o.n(p),L=o(10651),z=o(58503),ee=o(76516),te=o(40387),ne=o(24990),H=o(44251),ae=o(10367),le=o(51172),ie=o(25177),re=o(33841),se=o(49582),ce=o(36513),oe=o(4302),de=o(43007),ue=o(43223),me=o(96933),ve=o(93484),fe=o(80809),d=o(94427),M=o(75606);function ge(e,i){return e-i}function x(e){if(e==="*"||e==="?"||e==="")return e;const i=e.split(","),n=[];for(let s=0;s<i.length;s++){const f=i[s].match(/(\d+)-(\d+)/);if(f)for(let E=parseInt(f[1],10);E<=parseInt(f[2],10);E++)n.push(E);else n.push(parseInt(i[s],10))}return n}function Z(e,i){const n={};if(i){const s=i.split(/\D/);n.seconds=[parseInt(s[5],10)],n.minutes=[parseInt(s[4],10)],n.hours=[parseInt(s[3],10)],n.dates=[parseInt(s[2],10)],n.months=[parseInt(s[1],10)],n.dows="?"}else{const s=e.replace(/\s\s/g," ").replace(/\s\s/g," ").split(" ");s.length===6?(n.seconds=x(s[0]),n.minutes=x(s[1]),n.hours=x(s[2]),n.dates=x(s[3]),n.months=x(s[4]),n.dows=x(s[5])):(n.seconds=[0],n.minutes=x(s[0]),n.hours=x(s[1]),n.dates=x(s[2]),n.months=x(s[3]),n.dows=x(s[4]))}return n}function P(e){if(e==="*"||e==="?")return e;if(typeof e=="string"&&(e=parseInt(e,10)),typeof e!="object"&&(e=[e]),e.sort(ge),e.length<3)return e.join(",");const i=[];let n=e[0],s=e[0];for(let f=1;f<e.length;f++)e[f]===s+1?s++:(n!==s?n+1===s?i.push(`${n},${s}`):i.push(`${n}-${s}`):i.push(n),n=e[f],s=e[f]);return n!==s?n+1===s?i.push(`${n},${s}`):i.push(`${n}-${s}`):i.push(n),i.join(",")}function A(e){const i=["*","*","*","*","*","?"];return e.seconds&&(i[0]=P(e.seconds)),i[1]=P(e.minutes),i[2]=P(e.hours),i[3]=P(e.dates),i[4]=P(e.months),i[5]=P(e.dows),i[0]==="0"&&i.shift(),i.join(" ")}function R(e,i,n){if(i==="cron"){const s=Z(e);let f=new Date;return f.setHours(s.hours[0],s.minutes[0]),f=new Date(f.getTime()-(f.getTimezoneOffset()+n)*6e4),f}return i==="date"?(e+="Z",new Date(new Date(e).getTime()-n*6e4)):null}function j(e,i,n){if(i==="cron")return e=new Date(e.getTime()+(e.getTimezoneOffset()+n)*6e4),{minutes:[e.getMinutes()],hours:[e.getHours()]};if(i==="date"){e=new Date(e.getTime()+n*6e4);const s=e.toISOString();return s.substring(0,s.length-5)}return null}var V=o(59665),ye=o(96148),he=o(55784),Ee=o(26733),Ce=o(36105),W=o.n(Ce),ze=o(63460),Ve=o(79117),We=o(83994),Je=o(28301),He=o(19867),Ge=o(68582),Ke=o(37529),Qe=o(69850),Ue=o(15552),Ye=o(97712),t=o(4819),be=Object.defineProperty,Oe=Object.defineProperties,Te=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,K=(e,i,n)=>i in e?be(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n,xe=(e,i)=>{for(var n in i||(i={}))De.call(i,n)&&K(e,n,i[n]);if(G)for(var n of G(i))we.call(i,n)&&K(e,n,i[n]);return e},ke=(e,i)=>Oe(e,Te(i)),Q=(e,i,n)=>new Promise((s,f)=>{var E=v=>{try{k(n.next(v))}catch(a){f(a)}},r=v=>{try{k(n.throw(v))}catch(a){f(a)}},k=v=>v.done?s(v.value):Promise.resolve(v.value).then(E,r);k((n=n.apply(e,i)).next())});const Ne={single:"single_description",double:"double_description",toggle:"toggle_description"},Se={field:{padding:"2px 0px"},tableCell:{textAlign:"center"},typeDescription:{fontSize:12,whiteSpace:"normal",fontStyle:"italic"},selectId:{display:"flex"},narrowText:{width:140,marginLeft:8},narrowText2:{minWidth:150,marginRight:8},narrowColor:{width:200},dayTable:{marginLeft:20,display:"inline-block"}};function Ze(e,i){return e&&typeof e=="object"?e[i]||e.en:e}const U=e=>{var i;const n=e.event.native.intervals&&e.event.native.intervals[0]&&e.event.native.intervals[0].timeOffset?e.event.native.intervals[0].timeOffset/6e4:0,s=e.event.native.intervals&&e.event.native.intervals[0]&&e.event.native.intervals[0].value!==void 0?e.event.native.intervals[0].value:"",[f,E]=(0,T.useState)(!1),[r,k]=(0,T.useState)(e.event),[v,a]=(0,T.useState)(null),[h,y]=(0,T.useState)(!1),[m,w]=(0,T.useState)(n),[O,$]=(0,T.useState)(s);W().locale(e.language),(0,T.useEffect)(()=>{r.native.oid?e.socket.getObject(r.native.oid).then(l=>a(l)).catch(l=>{console.error(`Cannot get object ${r.native.oid}: ${l}`),a(null)}):a(null)},[r.native.oid,e.socket]);const N=r.native.cron?Z(r.native.cron):null;let S="once";Array.isArray(N==null?void 0:N.months)?S="monthly":Array.isArray(N==null?void 0:N.dows)&&(S="daily");let B;r&&(S==="once"?B=R(r.native.start,"date",e.serverTimeZone):(S==="monthly"||S==="daily")&&(B=R(r.native.cron,"cron",e.serverTimeZone)));const Be=JSON.stringify(e.event)!==JSON.stringify(r)||m!==n||O!==s,D=l=>{const c=JSON.parse(JSON.stringify(r));l(c),k(c)},Fe=(l,c)=>v?v.common.type==="boolean"?t.createElement(d.FormControlLabel,{className:e.classes.narrowText2,control:t.createElement(d.Checkbox,{checked:!!r.native[l],disabled:e.readOnly,onChange:g=>D(C=>C.native[l]=g.target.checked)}),label:e.t(c)}):v.common.states?t.createElement(d.FormControl,{className:e.classes.narrowText2,variant:"standard"},t.createElement(d.InputLabel,null,e.t(c)),t.createElement(d.Select,{value:r.native[l]||"",disabled:e.readOnly,onChange:g=>D(C=>C.native[l]=g.target.value)},Object.keys(v.common.states).map(g=>t.createElement(d.MenuItem,{key:g,value:g},v.common.states[g])))):t.createElement(d.TextField,{className:e.classes.narrowText2,label:e.t(c),value:r.native[l]||"",disabled:e.readOnly,onChange:g=>D(C=>C.native[l]=g.target.value),variant:"standard"}):null,Re=()=>v?v.common.type==="boolean"?t.createElement(d.FormControlLabel,{className:e.classes.narrowText2,control:t.createElement(d.Checkbox,{checked:!!O,disabled:e.readOnly,onChange:l=>$(l.target.checked)}),label:e.t("End value")}):v.common.states?t.createElement(d.FormControl,{className:e.classes.narrowText2,variant:"standard"},t.createElement(d.InputLabel,null,e.t("End value")),t.createElement(d.Select,{value:O||"",disabled:e.readOnly,onChange:l=>$(l.target.value)},Object.keys(v.common.states).map(l=>t.createElement(d.MenuItem,{key:l,value:l},v.common.states[l])))):t.createElement(d.TextField,{label:e.t("End value"),value:O||"",disabled:e.readOnly,onChange:l=>$(l.target.value),variant:"standard",className:e.classes.narrowText2}):null,q=((i=e.systemConfig)==null?void 0:i.firstDayOfWeek)==="monday"?[1,2,3,4,5,6,0]:[0,1,2,3,4,5,6];return t.createElement(d.Dialog,{open:!0,onClose:e.onClose,fullWidth:!0},t.createElement(d.DialogTitle,null,e.t("Configure event")),t.createElement(d.DialogContent,null,f&&t.createElement(M.SelectID,{imagePrefix:"../..",selected:r.native.oid,disabled:e.readOnly,onOk:l=>{D(c=>c.native.oid=l),E(!1)},onClose:()=>E(!1),socket:e.socket}),t.createElement("div",{className:e.classes.field},t.createElement(d.FormControlLabel,{control:t.createElement(d.Checkbox,{checked:!!(r!=null&&r.common.enabled),disabled:e.readOnly,onChange:l=>D(c=>c.common.enabled=l.target.checked)}),label:e.t("Active")})),t.createElement("div",{className:e.classes.field},t.createElement(d.FormControl,{variant:"standard",className:e.classes.narrowText2},t.createElement(d.InputLabel,null,e.t("Event type")),t.createElement(d.Select,{value:r.native.type||"",disabled:e.readOnly,onChange:l=>D(c=>c.native.type=l.target.value),renderValue:l=>e.t(l)},["single","double","toggle"].map(l=>t.createElement(d.MenuItem,{key:l,value:l},t.createElement("div",null,t.createElement("div",null,e.t(l)),t.createElement("div",{className:e.classes.typeDescription},e.t(Ne[l]))))))),t.createElement(he._,{dateAdapter:ye.Q},t.createElement(Ee.j,{label:e.t("Time"),value:B||null,disabled:e.readOnly,onChange:l=>{if(l)try{D(c=>{if(S==="once")c.native.start=j(l.toDate(),"date",e.serverTimeZone);else if(S==="monthly"||S==="daily"){const g=Z(c.native.cron),C=j(l.toDate(),"cron",e.serverTimeZone);g.hours=C.hours,g.minutes=C.minutes,c.native.cron=A(g)}})}catch(c){}},renderInput:l=>t.createElement(d.TextField,ke(xe({},l),{variant:"standard",className:e.classes.narrowText})),ampm:!1})),r.native.type!=="single"&&t.createElement(d.TextField,{label:e.t("Duration"),value:m,disabled:e.readOnly,onChange:l=>w(l.target.value),variant:"standard",className:e.classes.narrowText,InputProps:{endAdornment:t.createElement(d.InputAdornment,{position:"end"},e.t("minutes"))}})),t.createElement("div",{className:e.classes.field},t.createElement("div",{className:e.classes.selectId},t.createElement(d.TextField,{label:"Object ID",value:r.native.oid||"",disabled:e.readOnly,onChange:l=>D(c=>c.native.oid=l.target.value),variant:"standard",helperText:Ze((v==null?void 0:v.common.name)||"",e.language),fullWidth:!0}),t.createElement(d.Button,{onClick:()=>E(!0)},"..."))),t.createElement("div",{className:e.classes.field},Fe("startValue",r.native.type==="toggle"?"First value":"Start value"),r.native.type==="double"&&Re()),t.createElement("div",{className:e.classes.field},t.createElement(d.FormControl,{variant:"standard"},t.createElement(d.InputLabel,null,e.t("Period")),t.createElement(d.Select,{value:S||"once",disabled:e.readOnly,onChange:l=>{l.target.value!==r.native.cron&&D(c=>{if(l.target.value==="once")delete c.native.cron,c.native.start=j(B,"date",e.serverTimeZone);else if(l.target.value==="daily"){delete c.native.start;const g=Z("0 0 ? * 0-6"),C=j(B,"cron",e.serverTimeZone);g.hours=C.hours,g.minutes=C.minutes,c.native.cron=A(g)}else if(l.target.value==="monthly"){delete c.native.start;const g=Z("0 0 ? 1-12 ?"),C=j(B,"cron",e.serverTimeZone);g.hours=C.hours,g.minutes=C.minutes,c.native.cron=A(g)}})}},["once","daily","monthly"].map(l=>t.createElement(d.MenuItem,{key:l,value:l},e.t(l))))),S==="daily"&&t.createElement("table",{className:e.classes.dayTable},t.createElement("thead",null,t.createElement("tr",null,q.map(l=>t.createElement("td",{key:l,className:e.classes.tableCell},W()().day(l).format("ddd"))))),t.createElement("tbody",null,t.createElement("tr",null,q.map(l=>{var c;return t.createElement("td",{key:l},t.createElement(d.Checkbox,{checked:((c=N==null?void 0:N.dows)==null?void 0:c.includes(l))||!1,disabled:e.readOnly,onChange:g=>{D(C=>{const I=Z(C.native.cron);g.target.checked?I.dows.push(l):I.dows=I.dows.filter(F=>F!==l),C.native.cron=A(I)})},size:"small"}))}))))),S==="monthly"&&t.createElement("div",{className:e.classes.field},t.createElement("table",null,t.createElement("thead",null,t.createElement("tr",null,new Array(12).fill(null).map((l,c)=>t.createElement("td",{key:c,className:e.classes.tableCell},W()().month(c).format("MMM"))))),t.createElement("tbody",null,t.createElement("tr",null,new Array(12).fill(null).map((l,c)=>{var g;return t.createElement("td",{key:c},t.createElement(d.Checkbox,{checked:((g=N==null?void 0:N.months)==null?void 0:g.includes(c+1))||!1,disabled:e.readOnly,onChange:C=>{D(I=>{const F=Z(I.native.cron);C.target.checked?F.months.push(c+1):F.months=F.months.filter(Le=>Le!==c+1),I.native.cron=A(F)})},size:"small"}))}))))),t.createElement("div",{className:e.classes.field},t.createElement(d.TextField,{label:"Description",value:(r==null?void 0:r.common.name)||"",disabled:e.readOnly,onChange:l=>D(c=>c.common.name=l.target.value),variant:"standard",fullWidth:!0})),t.createElement("div",{className:e.classes.narrowColor},t.createElement(M.ColorPicker,{value:r.native.color||"",disabled:e.readOnly,onChange:l=>D(c=>c.native.color=l),name:e.t("Color")}))),t.createElement(d.DialogActions,null,e.readOnly?null:t.createElement(d.Button,{variant:"contained",color:"secondary",startIcon:t.createElement(V.Delete,null),onClick:()=>y(!0)},e.t("Delete")),!e.readOnly&&!e.widget?t.createElement("div",{style:{flex:1}}):null,e.readOnly?null:t.createElement(d.Button,{variant:"contained",color:"primary",disabled:!Be,startIcon:t.createElement(V.Save,null),onClick:()=>Q(void 0,null,function*(){r.native.type==="single"?r.native.intervals&&delete r.native.intervals:r.native.type==="double"?(r.native.intervals=r.native.intervals||[],r.native.intervals[0]=r.native.intervals[0]||{},r.native.intervals[0].timeOffset=(parseFloat(m)||1)*6e4,r.native.intervals[0].value=O):r.native.type==="toggle"&&(r.native.intervals=r.native.intervals||[],r.native.intervals[0]=r.native.intervals[0]||{},r.native.intervals[0].timeOffset=(parseFloat(m)||1)*6e4),yield e.socket.setObject(r._id,r),e.updateEvents(),e.onClose()})},e.t("Save")),t.createElement(d.Button,{variant:"contained",color:"grey",startIcon:t.createElement(V.Cancel,null),onClick:e.onClose},e.readOnly?e.t("Close"):e.t("Cancel"))),h&&t.createElement(M.Confirm,{title:e.t("Delete event"),text:e.t("Event will be deleted. Confirm?"),suppressQuestionMinutes:5,dialogName:"deleteConfirmDialog",onClose:l=>Q(void 0,null,function*(){if(l){try{yield e.socket.delObject(r._id),e.updateEvents()}catch(c){window.alert(`Cannot delete event: ${c}`)}e.onClose()}y(!1)})}))};U.propTypes={systemConfig:u().object,classes:u().object.isRequired,socket:u().object.isRequired,onClose:u().func.isRequired,event:u().object,readOnly:u().bool,updateEvents:u().func.isRequired,serverTimeZone:u().number.isRequired,t:u().func.isRequired,language:u().string.isRequired,widget:u().bool};var je=(0,z.withStyles)(Se)(U),b=o(4819),J=(e,i,n)=>new Promise((s,f)=>{var E=v=>{try{k(n.next(v))}catch(a){f(a)}},r=v=>{try{k(n.throw(v))}catch(a){f(a)}},k=v=>v.done?s(v.value):Promise.resolve(v.value).then(E,r);k((n=n.apply(e,i)).next())});const $e=[{type:"single",name:"Single event"},{type:"double",name:"Double event"},{type:"toggle",name:"Toggle event"}],Ie=({type:e,t:i})=>{const n=(0,T.useRef)(null);return(0,T.useEffect)(()=>{const s=new H._l(n.current,{eventData:()=>({id:e.type,title:i(e.name),create:!0,extendedProps:{type:e.type}})});return()=>{s.destroy()}},[]),b.createElement("div",{style:{backgroundColor:"rgb(58, 135, 178)",color:"white",cursor:"pointer",fontSize:"14px",padding:"3px 4px 6px 8px",borderRadius:4,marginBottom:20},ref:n},i(e.name))},Pe=()=>({container:{display:"flex",height:"100%",width:"100%"},leftBlock:{width:200},calendarBlock:{flex:1,display:"flex"},calendar:{marginRight:20,width:"100%"},leftPaper:{margin:20},leftContent:{display:"flex",flexDirection:"column",padding:"20px 10px"},hr:{width:"100%"}});function Y(e){if(e)return e.startsWith("#")?e.length===4?`#${e[1]}${e[1]}${e[2]}${e[2]}${e[3]}${e[3]}50`:`${e.substring(0,7)}50`:e.startsWith("rgb(")?e.replace("rgb(","rgba(").replace(")",", 0.3)"):e.startsWith("rgba(")?e.replace(/,\s?[.\d]+\)$/,", 0.3)"):e}function X(e){const[i,n]=(0,T.useState)(null),s=e.storageName||"calendar",f=(0,T.useRef)(null),E=(0,T.useRef)(null),r=(0,T.useRef)(null),k=(!e.widget&&window.localStorage.getItem(`${s}Start`),new Date),v=e.events.map(a=>{var h;if(!a)return null;const y=(h=a.native)!=null&&h.intervals&&a.native.intervals[0]&&a.native.intervals[0].timeOffset?a.native.intervals[0].timeOffset:20,m=a.common.enabled?a.native.color:Y(a.native.color);let w=M.Utils.invertColor(a.native.color,!0);if(a.common.enabled||(w=Y(w)),a.native.cron){const O=R(a.native.cron,"cron",e.serverTimeZone),$=Z(a.native.cron);return O.setFullYear(1970),Array.isArray($.months)?{id:a._id,title:a.common.name,backgroundColor:m,textColor:w,start:O,duration:y,allDay:!1,rrule:{dtstart:new Date(O.getTime()-O.getTimezoneOffset()*6e4),freq:"daily",bymonth:$.months}}:Array.isArray($.dows)?{id:a._id,title:a.common.name,backgroundColor:m,textColor:w,start:O,duration:y,allDay:!1,display:"block",rrule:{dtstart:new Date(O.getTime()-O.getTimezoneOffset()*6e4),freq:"weekly",byweekday:$.dows.map(N=>N===0?6:N-1)}}:{id:a._id,title:a.common.name,duration:y,backgroundColor:m,textColor:w}}return{id:a._id,title:a.common.name,display:"block",backgroundColor:m,textColor:w,start:R(a.native.start,"date",e.serverTimeZone),end:R(new Date(new Date(a.native.start).getTime()+y),"date",e.serverTimeZone)}}).filter(a=>a);return(0,T.useEffect)(()=>{if(e.widget){const a=()=>{var h;const y=(h=f.current)==null?void 0:h.getApi();y&&(console.log("Scroll to now"),y.scrollToTime(new Date().getTime())),E.current?r.current=null:r.current=setTimeout(()=>a,3e5)};setTimeout(a,1e3)}return()=>{r.current&&clearTimeout(r.current),r.current=null,E.current&&clearTimeout(E.current),E.current=null}},[]),b.createElement(b.Fragment,null,b.createElement("style",null,e.theme.palette.mode==="dark"?`
:root {
    --fc-neutral-bg-color: hsla(0,0%,12%);
    --fc-list-event-hover-bg-color: hsla(0,0%,12%);
}
.fc-col-header-cell {
    background-color: #1e1e1e;
}                
`:`
.fc-col-header-cell {
    background-color: #EEEEEE;
}
`),i?b.createElement(je,{systemConfig:e.systemConfig,widget:e.widget,event:e.events.find(a=>a._id===i),onClose:()=>n(null),socket:e.socket,updateEvents:e.updateEvents,serverTimeZone:e.serverTimeZone,readOnly:e.readOnly,t:e.t,language:e.language}):null,b.createElement("div",{className:e.classes.container},!e.hideLeftBlock&&!e.readOnly&&b.createElement("div",{className:e.classes.leftBlock},b.createElement(d.Paper,{elevation:4,className:e.classes.leftPaper},b.createElement("div",{className:e.classes.leftContent},b.createElement("h4",null,e.t("Events")),$e.map((a,h)=>b.createElement(Ie,{t:e.t,type:a,name:e.t(a.name),key:a.type,index:h})),e.hideLeftBlockHint?null:b.createElement("div",null,e.t("Drag and drop the events above to create a new one.")),e.hideLeftBlockHint?null:b.createElement("hr",{className:e.classes.hr}),e.hideLeftBlockHint?null:b.createElement("div",null,e.t("Use ALT by dragging it to copy the events."))))),b.createElement("div",{className:e.classes.calendarBlock},b.createElement("div",{className:e.classes.calendar},b.createElement(ee.Z,{ref:f,plugins:[le.Z,te.Z,ne.Z,H.ZP,ae.Z],weekends:!e.hideWeekends,headerToolbar:e.hideTopBlock?!1:{left:e.hideTopBlockButtons?"":"prev,next today",center:"title",right:e.hideTopBlockButtons?"":"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},initialView:e.viewMode||window.localStorage.getItem(`${s}View`)||"dayGridMonth",initialDate:k,editable:!e.readOnly,selectable:!0,selectMirror:!0,nowIndicator:!0,dayMaxEvents:!0,events:v,height:"calc(100% - 20px)",locales:[ie.Z,re.Z,se.Z,ce.Z,oe.Z,de.Z,ue.Z,me.Z,ve.Z,fe.Z],locale:e.language,datesSet:a=>{e.widget?(r.current&&clearTimeout(r.current),r.current=null,E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{E.current=null;const h=()=>{var y;const m=(y=f.current)==null?void 0:y.getApi();m==null||m.scrollToTime(new Date().getTime()),E.current?r.current=null:r.current=setTimeout(()=>h,1e3*60*5)};h()},6e4)):window.localStorage.setItem(`${s}View`,a.view.type)},eventClick:a=>n(a.event.id),eventResize:a=>{var h;const y=e.events.find(m=>m._id===a.event.id);if((h=y.native.intervals)!=null&&h[0].timeOffset){const m=JSON.parse(JSON.stringify(y));m.native.intervals[0].timeOffset+=a.endDelta.milliseconds,e.socket.setObject(m._id,m),e.updateEvents()}else a.revert()},eventDrop:a=>J(this,null,function*(){var h;const y=e.events.find(m=>m._id===a.event.id);if((h=y==null?void 0:y.native)!=null&&h.cron){const m=JSON.parse(JSON.stringify(y));a.jsEvent.altKey&&(m._id=`fullcalendar.${e.instance}.event-${(0,L.Z)()}`);const w=Z(m.native.cron),O=j(a.event.start,"cron",e.serverTimeZone);w.hours=O.hours,w.minutes=O.minutes,m.native.cron=A(w),yield e.socket.setObject(m._id,m),e.updateEvents()}else{const m=JSON.parse(JSON.stringify(y));a.jsEvent.altKey&&(m._id=`fullcalendar.${e.instance}.event-${(0,L.Z)()}`),m.native.start=j(a.event.start,"date",e.serverTimeZone),yield e.socket.setObject(m._id,m),e.updateEvents()}}),eventReceive:a=>J(this,null,function*(){const h={_id:`fullcalendar.${e.instance}.event-${(0,L.Z)()}`,common:{name:a.event.title,enabled:!0},native:{id:Date.now(),start:j(a.event.start,"date",e.serverTimeZone),type:a.event.extendedProps.type,oid:"",startValue:"",color:"#3A87AD"},type:"schedule"};a.event.extendedProps.type!=="single"&&(h.native.intervals=[{timeOffset:30*60*1e3}]),yield e.socket.setObject(h._id,h),e.updateEvents(),setTimeout(()=>n(h._id),100)}),select:a=>J(this,null,function*(){if(a.view.calendar.unselect(),e.readOnly)return;const y={_id:`fullcalendar.${e.instance}.event-${(0,L.Z)()}`,common:{name:e.t("Single event"),enabled:!0},native:{id:Date.now(),start:j(a.date||a.start,"date",e.serverTimeZone),intervals:a.end?[{value:"",timeOffset:a.end.getTime()-a.start.getTime()}]:void 0,type:a.end?"double":"single",oid:"",startValue:"",color:"#3A87AD"},type:"schedule"};yield e.socket.setObject(y._id,y),yield e.updateEvents(),setTimeout(()=>n(y._id),100)})})))))}X.propTypes={events:u().array,serverTimeZone:u().number,systemConfig:u().object,theme:u().object,socket:u().object,readOnly:u().bool,hideLeftBlock:u().bool,hideTopBlock:u().bool,hideLeftBlockHint:u().bool,hideTopBlockButtons:u().bool,hideWeekends:u().bool,viewMode:u().bool,updateEvents:u().func,instance:u().oneOfType([u().string,u().number]),t:u().func.isRequired,widget:u().bool,language:u().string.isRequired,storageName:u().string};var Ae=(0,z.withTheme)((0,z.withStyles)(Pe)(X))}}]);

//# sourceMappingURL=src_Component_Calendar_js-webpack_sharing_consume_default_iobroker_vis-2-widgets-react-dev_io-4dd1d1.d8955662.chunk.js.map