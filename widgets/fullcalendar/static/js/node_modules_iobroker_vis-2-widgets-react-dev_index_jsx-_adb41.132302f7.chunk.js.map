{"version":3,"file":"static/js/node_modules_iobroker_vis-2-widgets-react-dev_index_jsx-_adb41.132302f7.chunk.js","mappings":"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","sources":["../node_modules/@iobroker/vis-2-widgets-react-dev/visRxWidget.jsx"],"sourcesContent":["import React from 'react';\n\nimport {\n    Card,\n    CardContent,\n} from '@mui/material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nconst POSSIBLE_MUI_STYLES = [\n    'background-color',\n    'border',\n    'background',\n    'background-image',\n    'background-position',\n    'background-repeat',\n    'background-size',\n    'background-clip',\n    'background-origin',\n    'color',\n    'box-sizing',\n    'border-width',\n    'border-style',\n    'border-color',\n    'border-radius',\n    'box-shadow',\n    'text-align',\n    'text-shadow',\n    'font-family',\n    'font-size',\n    'font-weight',\n    'line-height',\n    'font-style',\n    'font-variant',\n    'letter-spacing',\n    'word-spacing',\n];\n\nclass visRxWidget extends React.Component {\n    static POSSIBLE_MUI_STYLES = POSSIBLE_MUI_STYLES;\n\n    constructor(props) {\n        super(props);\n        this.onStateChanged = this.onStateChanged.bind(this);\n        this.state = {\n            ...props,\n            values: {},\n            data: JSON.parse(JSON.stringify(props.data || {})),\n            style: JSON.parse(JSON.stringify(props.style || {})),\n            rxData: JSON.parse(JSON.stringify(props.data || {})),\n            rxStyle: JSON.parse(JSON.stringify(props.style || {})),\n        };\n        this.linkContext = {\n            IDs: [],\n        };\n    }\n\n    static getI18nPrefix() {\n        return '';\n    }\n\n    static getText(text) {\n        if (text && typeof text === 'object') {\n            return text[I18n.getLanguage()] || text.en;\n        }\n        return text;\n    }\n\n    static t(key, ...args) {\n        return I18n.t(`${this.getI18nPrefix()}${key}`, ...args);\n    }\n\n    static getLanguage() {\n        return I18n.getLanguage();\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderWidgetBody(props) {\n        return null;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    // @ts-ignore\n    onStateUpdated(id, state) {\n\n    }\n\n    formatValue(value, round) {\n        if (typeof value === 'number') {\n            if (round === 0) {\n                value = Math.round(value);\n            } else {\n                value = Math.round(value * 100) / 100;\n            }\n            if (this.props.context.systemConfig?.common) {\n                if (this.props.context.systemConfig.common.isFloatComma) {\n                    value = value.toString().replace('.', ',');\n                }\n            }\n        }\n\n        return value === undefined || value === null ? '' : value.toString();\n    }\n\n    wrapContent(content, addToHeader, cardContentStyle, headerStyle, onCardClick, components) {\n        const MyCard = components?.Card || Card;\n        const MyCardContent = components?.CardContent || CardContent;\n\n        const style = {\n            width: 'calc(100% - 8px)',\n            height: 'calc(100% - 8px)',\n            margin: 4,\n            ...this.props.customSettings?.viewStyle?.visCard,\n        };\n        // apply style from the element\n        Object.keys(this.state.rxStyle).forEach(attr => {\n            const value = this.state.rxStyle[attr];\n            if (value !== null &&\n                value !== undefined &&\n                POSSIBLE_MUI_STYLES.includes(attr)\n            ) {\n                attr = attr.replace(\n                    /(-\\w)/g,\n                    text => text[1].toUpperCase(),\n                );\n                style[attr] = value;\n            }\n        });\n\n        this.wrappedContent = true;\n\n        return <MyCard\n            className=\"vis_rx_widget_card\"\n            style={style}\n            onClick={onCardClick}\n        >\n            <MyCardContent\n                className=\"vis_rx_widget_card_content\"\n                style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    height: 'calc(100% - 32px)',\n                    paddingBottom: 16,\n                    position: 'relative',\n                    ...cardContentStyle,\n                }}\n            >\n                {this.state.rxData.widgetTitle ? <div\n                    className=\"vis_rx_widget_card_name\"\n                    style={{\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        width: '100%',\n                        alignItems: 'center',\n                    }}\n                >\n                    <div\n                        className=\"vis_rx_widget_card_name_div\"\n                        style={{\n                            fontSize: 24,\n                            paddingTop: 0,\n                            paddingBottom: 4,\n                            ...headerStyle,\n                        }}\n                    >\n                        {this.state.rxData.widgetTitle}\n                    </div>\n                    {addToHeader || null}\n                </div> : (addToHeader || null)}\n                {content}\n            </MyCardContent>\n        </MyCard>;\n    }\n\n    getIdSubscribeState = (id, cb) => {\n        return this.props.context.socket.getState(id)\n            .then(result => {\n                cb(id, result);\n                return this.props.context.socket.subscribeState(id, (resultId, result) => cb(id, result));\n            });\n    };\n\n    onStateChanged(id, state) {\n        if (!state) {\n            return;\n        }\n        const values = JSON.parse(JSON.stringify(this.state.values));\n        Object.keys(state).forEach(key =>\n            values[`${id}.${key}`] = state[key]);\n\n        this.onStateUpdated(id, state);\n\n        this.setState({ values });\n    }\n\n    async componentDidMount() {\n        this.getWidgetInfo()?.visAttrs?.forEach(group =>\n            group?.fields?.forEach(field => {\n                if (field?.type === 'id') {\n                    Object.keys(this.state.data).forEach(dataKey => {\n                        // do not use here \\d instead of [0-9] as it will be wrong compiled\n                        if (dataKey.match(new RegExp(`^${field.name}[0-9]*$`))) {\n                            const oid = this.state.data[dataKey];\n                            if (!this.linkContext.IDs.includes(oid)) {\n                                this.linkContext.IDs.push(oid);\n                            }\n                        }\n                    });\n                }\n            }));\n\n        for (let i = 0; i < this.linkContext.IDs.length; i++) {\n            await this.getIdSubscribeState(this.linkContext.IDs[i], this.onStateChanged);\n        }\n    }\n\n    componentWillUnmount() {\n        this.linkContext.IDs.forEach(oid =>\n            this.props.context.socket.unsubscribeState(oid, this.onStateChanged));\n    }\n\n    getWidgetView(view, props) {\n        return <div style={{ width: '100%', height: '100%' }}>\n            DEMO VIEW\n        </div>;\n    }\n\n    render() {\n        return <div style={{ width: this.state.style?.width, height: this.state.style?.height }}>\n            {this.renderWidgetBody({\n                widget: {\n\n                },\n            })}\n        </div>;\n    }\n}\n\nexport default visRxWidget;\n"],"names":["_react","_interopRequireDefault","require","_material","_adapterReactV","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","_getPrototypeOf2","NewTarget","constructor","_possibleConstructorReturn2","POSSIBLE_MUI_STYLES","visRxWidget","_React$Component","_inherits2","_super","props","_this","_classCallCheck2","_assertThisInitialized2","id","cb","context","socket","getState","then","subscribeState","resultId","onStateChanged","bind","state","values","data","JSON","parse","stringify","style","rxData","rxStyle","linkContext","IDs","_createClass2","value","round","_this$props$context$s","Math","this","systemConfig","common","isFloatComma","toString","replace","undefined","content","addToHeader","cardContentStyle","headerStyle","onCardClick","components","_this$props$customSet","_this2","MyCard","Card","MyCardContent","CardContent","width","height","margin","customSettings","viewStyle","visCard","attr","includes","text","toUpperCase","wrappedContent","createElement","className","onClick","display","flexDirection","alignItems","paddingBottom","position","widgetTitle","justifyContent","fontSize","paddingTop","concat","onStateUpdated","setState","_componentDidMount","_asyncToGenerator2","_regenerator","mark","_callee","_this$getWidgetInfo","_this3","wrap","_context","prev","next","getWidgetInfo","visAttrs","group","_group$fields","fields","field","type","dataKey","match","RegExp","name","oid","getIdSubscribeState","stop","_this4","unsubscribeState","view","_this$state$style","_this$state$style2","renderWidgetBody","widget","_typeof2","I18n","getLanguage","en","_len","args","Array","_key","t","getI18nPrefix","Component","_default","exports"],"sourceRoot":""}